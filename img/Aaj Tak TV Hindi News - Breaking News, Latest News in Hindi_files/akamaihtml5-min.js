function AkaHTML5MediaAnalytics(cu){var bQ="3.10.4";var bF=document.currentScript;var k=null;var ai=null;var aZ=true;if(bF){k=bF.src}else{bG("Should be Internet Explorer")}function H(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}function c7(){return(H()+H()+"-"+H()+"-"+H()+"-"+H()+"-"+H()+H()+H())}var by=by||function(df,dd){var dg={},di=dg.lib={},c9=di.Base=function(){function dk(){}return{extend:function(dl){dk.prototype=this;var dm=new dk;dl&&dm.mixIn(dl);dm.$super=this;return dm},create:function(){var dl=this.extend();dl.init.apply(dl,arguments);return dl},init:function(){},mixIn:function(dl){for(var dm in dl){dl.hasOwnProperty(dm)&&(this[dm]=dl[dm])}dl.hasOwnProperty("toString")&&(this.toString=dl.toString)},clone:function(){return this.$super.extend(this)}}}(),da=di.WordArray=c9.extend({init:function(dk,dl){dk=this.words=dk||[];this.sigBytes=dl!=dd?dl:4*dk.length},toString:function(dk){return(dk||dh).stringify(this)},concat:function(dl){var dm=this.words,dp=dl.words,dn=this.sigBytes,dl=dl.sigBytes;this.clamp();if(dn%4){for(var dk=0;dk<dl;dk++){dm[dn+dk>>>2]|=(dp[dk>>>2]>>>24-8*(dk%4)&255)<<24-8*((dn+dk)%4)}}else{if(65535<dp.length){for(dk=0;dk<dl;dk+=4){dm[dn+dk>>>2]=dp[dk>>>2]}}else{dm.push.apply(dm,dp)}}this.sigBytes+=dl;return this},clamp:function(){var dk=this.words,dl=this.sigBytes;dk[dl>>>2]&=4294967295<<32-8*(dl%4);dk.length=df.ceil(dl/4)},clone:function(){var dk=c9.clone.call(this);dk.words=this.words.slice(0);return dk},random:function(dk){for(var dl=[],dm=0;dm<dk;dm+=4){dl.push(4294967296*df.random()|0)}return da.create(dl,dk)}}),e=dg.enc={},dh=e.Hex={stringify:function(dl){for(var dm=dl.words,dl=dl.sigBytes,dp=[],dk=0;dk<dl;dk++){var dn=dm[dk>>>2]>>>24-8*(dk%4)&255;dp.push((dn>>>4).toString(16));dp.push((dn&15).toString(16))}return dp.join("")},parse:function(dl){for(var dm=dl.length,dn=[],dk=0;dk<dm;dk+=2){dn[dk>>>3]|=parseInt(dl.substr(dk,2),16)<<24-4*(dk%8)}return da.create(dn,dm/2)}},dc=e.Latin1={stringify:function(dl){for(var dm=dl.words,dl=dl.sigBytes,dk=[],dn=0;dn<dl;dn++){dk.push(String.fromCharCode(dm[dn>>>2]>>>24-8*(dn%4)&255))}return dk.join("")},parse:function(dl){for(var dk=dl.length,dn=[],dm=0;dm<dk;dm++){dn[dm>>>2]|=(dl.charCodeAt(dm)&255)<<24-8*(dm%4)}return da.create(dn,dk)}},db=e.Utf8={stringify:function(dl){try{return decodeURIComponent(escape(dc.stringify(dl)))}catch(dk){throw Error("Malformed UTF-8 data")}},parse:function(dk){return dc.parse(unescape(encodeURIComponent(dk)))}},de=di.BufferedBlockAlgorithm=c9.extend({reset:function(){this._data=da.create();this._nDataBytes=0},_append:function(dk){"string"==typeof dk&&(dk=db.parse(dk));this._data.concat(dk);this._nDataBytes+=dk.sigBytes},_process:function(dl){var dk=this._data,dr=dk.words,dq=dk.sigBytes,dm=this.blockSize,dn=dq/(4*dm),dn=dl?df.ceil(dn):df.max((dn|0)-this._minBufferSize,0),dl=dn*dm,dq=df.min(4*dl,dq);if(dl){for(var dp=0;dp<dl;dp+=dm){this._doProcessBlock(dr,dp)}dp=dr.splice(0,dl);dk.sigBytes-=dq}return da.create(dp,dq)},clone:function(){var dk=c9.clone.call(this);dk._data=this._data.clone();return dk},_minBufferSize:0});di.Hasher=de.extend({init:function(){this.reset()},reset:function(){de.reset.call(this);this._doReset()},update:function(dk){this._append(dk);this._process();return this},finalize:function(dk){dk&&this._append(dk);this._doFinalize();return this._hash},clone:function(){var dk=de.clone.call(this);dk._hash=this._hash.clone();return dk},blockSize:16,_createHelper:function(dk){return function(dl,dm){return dk.create(dm).finalize(dl)}},_createHmacHelper:function(dk){return function(dl,dm){return dj.HMAC.create(dk,dm).finalize(dl)}}});var dj=dg.algo={};return dg}(Math);(function(){var db=by,da=db.lib,dc=da.WordArray,da=da.Hasher,c9=[],e=db.algo.SHA1=da.extend({_doReset:function(){this._hash=dc.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(di,dd){for(var dk=this._hash.words,df=dk[0],de=dk[1],dg=dk[2],dh=dk[3],dm=dk[4],dj=0;80>dj;dj++){if(16>dj){c9[dj]=di[dd+dj]|0}else{var dl=c9[dj-3]^c9[dj-8]^c9[dj-14]^c9[dj-16];c9[dj]=dl<<1|dl>>>31}dl=(df<<5|df>>>27)+dm+c9[dj];dl=20>dj?dl+((de&dg|~de&dh)+1518500249):40>dj?dl+((de^dg^dh)+1859775393):60>dj?dl+((de&dg|de&dh|dg&dh)-1894007588):dl+((de^dg^dh)-899497514);dm=dh;dh=dg;dg=de<<30|de>>>2;de=df;df=dl}dk[0]=dk[0]+df|0;dk[1]=dk[1]+de|0;dk[2]=dk[2]+dg|0;dk[3]=dk[3]+dh|0;dk[4]=dk[4]+dm|0},_doFinalize:function(){var dd=this._data,df=dd.words,dg=8*this._nDataBytes,de=8*dd.sigBytes;df[de>>>5]|=128<<24-de%32;df[(de+64>>>9<<4)+15]=dg;dd.sigBytes=4*df.length;this._process()}});db.SHA1=da._createHelper(e);db.HmacSHA1=da._createHmacHelper(e)})();(function(){var c9=by,e=c9.enc.Utf8;c9.algo.HMAC=c9.lib.Base.extend({init:function(dg,di){dg=this._hasher=dg.create();"string"==typeof di&&(di=e.parse(di));var df=dg.blockSize,db=4*df;di.sigBytes>db&&(di=dg.finalize(di));for(var da=this._oKey=di.clone(),dh=this._iKey=di.clone(),dd=da.words,dc=dh.words,de=0;de<df;de++){dd[de]^=1549556828,dc[de]^=909522486}da.sigBytes=dh.sigBytes=db;this.reset()},reset:function(){var da=this._hasher;da.reset();da.update(this._iKey)},update:function(da){this._hasher.update(da);return this},finalize:function(db){var da=this._hasher,db=da.finalize(db);da.reset();return da.finalize(this._oKey.clone().concat(db))}})})();(function(){var dc=by,db=dc.lib,dd=db.Base,c9=db.WordArray,db=dc.algo,e=db.HMAC,da=db.PBKDF2=dd.extend({cfg:dd.extend({keySize:4,hasher:db.SHA1,iterations:1}),init:function(de){this.cfg=this.cfg.extend(de)},compute:function(dm,dp){for(var dl=this.cfg,di=e.create(dl.hasher,dm),dk=c9.create(),dj=c9.create([1]),dr=dk.words,dn=dj.words,dq=dl.keySize,dl=dl.iterations;dr.length<dq;){var dh=di.update(dp).finalize(dj);di.reset();for(var df=dh.words,dt=df.length,de=dh,du=1;du<dl;du++){de=di.finalize(de);di.reset();for(var ds=de.words,dg=0;dg<dt;dg++){df[dg]^=ds[dg]}}dk.concat(dh);dn[0]++}dk.sigBytes=4*dq;return dk}});dc.PBKDF2=function(de,dg,df){return da.create(df).compute(de,dg)}})();function b7(dg,dd){if(dg==null||dg==""){return}var db=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var da=db.exec(dg);dd.protocol=da[1];dd.hostName=da[2];dd.port=da[3]?da[3]:"80";dd.path=da[4];var df=dd.path.split("/");var dc=df.length;dd.streamName=df[dc-1];var c9=dd.streamName.toLowerCase();if((c9.indexOf(".m3u")!=-1)||(c9.indexOf("manifest")!=-1)||(c9.indexOf(".f4m")!=-1)||(c9.indexOf(".mpd")!=-1)){if(dc>=3){dd.streamName=df[dc-2]+"/"+df[dc-1]}}dd.hash=da[5]?da[5]:"";dd.search=da[6]?da[6]:"";dd.host=dd.hostName+":"+dd.port}catch(de){bG("Exception,  parseStreamUrl :"+de)}}function b0(e,c9){var da;if(e!=null){da=e}else{da=new Date().getTime()}return da}var X=false;if(window){try{X=window.XDomainRequest?true:false}catch(b6){X=false}}var bb={};var W={};var bq=null;var ch={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:"",fullOs:"",longitude:"",latitude:"",connectivity:""};var cq={title:false,category:false,subCategory:false,show:false,contentLength:false,contentType:false,device:false,deliveryType:false,playerId:false,eventName:false};var aD={};var cg={};aD.isBrightcoveVideo=false;aD.objectBased=false;aD.videoPassed=false;var al=false;var O=false;var aP=false;var aA={};var bM={};var cy=false;var cO=[];var bg={timer:null,queue:[],browserClose:false,enabled:true,time:250};var bz={};var bu=[];var aS={};var bL={};var n={};n.seekThreshold=2000;n.visitTimeout=60*60*1000;var aK={};var cp={};var aj={};var bY={};var J=100;var cv={};var ac=false;var bK=false;var c={fastTCPFailed:false,fastTCPEnabled:false};var ct=[];var br={};br.dataSent={};var b5=1;var aI=-1;var q=null;var cf={};var x=[];var L={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:false,logStoredMsg:true,printException:false};function an(){this.aisRetries=0;this.aisRequestLimit=3;this.aisRequestInterval=30000;this.requestFailed=false}var b4=new an();var B={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=false;this.isAdStarted=false;this.id="";this.type="0";this.startPos="0";this.playBucket="-1";this.endStatus="2";this.adLoadTime=null;this.adStartTime=null;this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++){this[this.setDataArr[e]]=""}}};var cc={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[];this.currentBitRate="-";this.bitRateCount={};this.bitRatePlayTime={}},updateBitRateArr:function(da){if(this.bitRateArr.length>0){var e=this.bitRateArr.length;var c9=cc.bitRateArr[e-1];if((this.currentBitRate==c9.bitRate)){c9.playTime+=da}else{this.pushInBitRateArr(da,this.currentBitRate,this.currentStartPos)}}else{this.pushInBitRateArr(da,this.currentBitRate,this.currentStartPos)}},pushInBitRateArr:function(da,e,c9){this.bitRateArr.push({bitRate:e,playTime:da,startPos:c9})},populateBitRateBucketMap:function(e,dd){var da,db=false;var c9=bY.bitRateBucketTimes;if(e!="-"&&e!==""){e=parseInt(e/1000)}for(var dc in c9){db=false;da=c9[dc];if(e=="-"||e===""||e<0){if(!da.max&&!da.min){db=true;break}}else{if(da.max&&da.min){if(e>=da.min&&e<da.max){db=true;break}}else{if(da.max){if(e<da.max){db=true;break}}else{if(da.min){if(e>=da.min){db=true;break}}}}}}if(db){this.bitRateBucketMap[dc]+=dd}},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var c9=0,da=-1;for(var db in this.bitRatePlayTime){if(this.bitRatePlayTime[db]>da){da=this.bitRatePlayTime[db];c9=db}}if(c9!==0){return c9}}}catch(dc){bG("Exception, find max persistent bit rate")}},getTransitionSession:function(df){try{var db=null;var da,dj,dc="";var dd=0,dg,di=0,c9=0;var de=true;if(this.bitRateArr.length>0){da=this.bitRateArr[0];if(da.bitRate=="-"){de=false;if(this.bitRateArr[1]&&this.bitRateArr[1].bitRate!="-"){de=true;this.bitRateArr[1].startPos=this.bitRateArr[0].startPos;this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime;this.bitRateArr.shift()}}}for(dj in this.bitRateBucketMap){this.bitRateBucketMap[dj]=0}for(dd=0;dd<this.bitRateArr.length;dd++){da=this.bitRateArr[dd];if(da.bitRate in this.bitRateCount){if(dd!=0){this.bitRateCount[da.bitRate]++}}else{this.bitRateCount[da.bitRate]=1}if(da.bitRate!=""&&da.bitRate!="-"){if(da.bitRate in this.bitRatePlayTime){this.bitRatePlayTime[da.bitRate]+=da.playTime}else{this.bitRatePlayTime[da.bitRate]=da.playTime}}dg=this.bitRateCount[da.bitRate];if(db){db+=","+da.bitRate+":"+da.startPos+":"+da.playTime+"::"+dg}else{db=da.bitRate+":"+da.startPos+":"+da.playTime+"::"+dg}this.populateBitRateBucketMap(da.bitRate,da.playTime);try{if(de){di+=da.bitRate*da.playTime;c9+=da.playTime}}catch(dh){}}df.maxPersistentBitRate=this.findMaxPersistentBitRate();df.transitionStreamTimeSession=db;for(dj in this.bitRateBucketMap){if(dc){dc+=","+dj+":"+this.bitRateBucketMap[dj]}else{dc=dj+":"+this.bitRateBucketMap[dj]}}df.bitRateBucketTimes=dc;try{if(de&&c9&&c9!=0){df.averagedBitRate=di+":"+c9}else{df.averagedBitRate=null}}catch(dh){}}catch(dh){bG("Exception, get transition Session :"+dh)}}};fragmentState={Invalid:"Invalid",InPorgress:"InProgress",Completed:"Completed",};fragment=function(c9,e){this.id=c9;this.bitrate=e;this.timeStamp=new Date().getTime();this.state=fragmentState.InPorgress;this.downloadTime=0;this.bytesDownloaded=0};streamFragments=function(){this.fragments={};this.fragmentId=0;this.downloadStarted=function(c9){var e=new fragment(this.fragmentId,c9);this.fragments[this.fragmentId.toString()]=e};this.cleanup=function(){for(var e in this.fragments){delete this.fragments[e]}};this.downloadCompleted=function(db,e){if(this.fragments[this.fragmentId.toString()]&&this.fragments[this.fragmentId.toString()].state!==fragmentState.Completed){var da=this.fragments[this.fragmentId.toString()];var c9=new Date().getTime();da.downloadTime=c9-da.timeStamp;da.state=fragmentState.Completed;if(e){da.bytesDownloaded=e;console.log("bytesDownloaded reported = "+e)}else{da.bytesDownloaded=db*da.downloadTime;console.log("bytesDownloaded not reported and calculated one is = "+da.bytesDownloaded)}this.fragmentId++}}};hlsStream=function(){var c9=0;var e=new streamFragments();this.streamFragmentDownloadStarted=function(da){e.downloadStarted(da);if(c9!==da){bS(da)}};this.streamFragmentDownloadCompleted=function(da){e.downloadCompleted(da,0)};this.cleanupFragments=function(){e.cleanup()};this.getBandwidthFromFragments=function(){var dc=0;var da=0;for(index in e.fragments){var db=e.fragments[index];if(db.state===fragmentState.Completed&&db.bytesDownloaded){dc+=db.bytesDownloaded;da+=db.downloadTime}}if(da===0){return 0}return(dc/da)}};var bC="";var c5=function(){if(typeof(akamaiBCVideoObject)!="undefined"){try{var da=document.getElementsByTagName("script");var dd=0;var c9="";if(da.length){for(dd=0;dd<da.length;dd++){if((da[dd].src!=null)&&((da[dd].src.indexOf("79423.analytics.edgesuite.net")!=-1)||(da[dd].src.indexOf("79423.analytics.edgekey.net")!=-1))){bC=da[dd].src;c9=I("configPath",da[dd].src);if(c9!=""){aA.url=c9}}}}}catch(df){}}else{if(cu&&cu.configPath){aA.url=cu.configPath;aD.objectBased=true}else{aA.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}}try{if(window){var dh=null;if(bD()){dh=I("AkamaiAnalytics_configPath",window.parent.location);if(dh){aA.url=dh}}else{dh=I("AkamaiAnalytics_configPath",window.location);if(dh){aA.url=dh}}}}catch(df){}if(aA.url){var dg=parseInt(I("enableGenericAPI",aA.url));if(dg==1){aD.objectBased=true}aA.beaconSent=parseInt(I("beaconSentNotify",aA.url));var dc=parseInt(I("setVideoObject",aA.url));if(dc==1){aD.videoPassed=true}var de=parseInt(I("subscribeVideo",aA.url));if(de==1){aD.videoPassed=true}var db=parseInt(I("exception",aA.url));if(db==1){L.printException=true}L.configURLCsmaDebug=parseInt(I("debug",aA.url))}}();function bD(){var de=false;try{if(window!==window.parent){var da={};var db={};var c9=document.URL;var dd=null;if(document&&document.referrer){dd=document.referrer}if(c9!=null){b7(c9,da)}if(dd!=null){b7(dd,db)}if(da.port===db.port&&da.protocol===db.protocol&&da.hostName===db.hostName){de=true}}else{de=true}}catch(dc){}return de}try{if(window){if(bD()){L.pageURLCsmaDebug=parseInt(I("AkamaiAnalytics_debug",window.parent.location))}else{L.pageURLCsmaDebug=parseInt(I("AkamaiAnalytics_debug",window.location))}}}catch(b6){}try{if(typeof(akamaiBCVideoObject)!="undefined"&&typeof(brightcovePerforceVersion)!="undefined"){bd("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}}catch(b6){bG("Exception,  pluginVersion: "+b6)}function cN(){var de=false;try{var da=document.URL;var db=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;var c9=db.exec(da);var dd=c9[1];if(dd=="https"){de=true}}catch(dc){}return de}function aR(){if(L.windowOpened){return}if(L.pageURLCsmaDebug==1||L.configURLCsmaDebug==1||L.configDebug==1){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){return}var e="JS -"+bQ;if("pluginVersion" in W){e=e+":"+W.pluginVersion}AkamaiAnalytics_debugWindow_data={version:e};if(cN()){r("https://79423.analytics.edgekey.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug");cS(l,"https://79423.analytics.edgekey.net/plugins/release-details/latest/html5.xml",false,true)}else{r("http://79423.analytics.edgesuite.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug");cS(l,"http://79423.analytics.edgesuite.net/plugins/release-details/latest/html5.xml",false,true)}L.windowOpened=true;aa()}}aR();function aa(){try{var c9=aA.url.toLowerCase();var db="";if(c9.indexOf(".edgesuite.net/")==-1&&c9.indexOf(".edgekey.net/")==-1){db="Incorrect Beacon XML Path";db+="<ul style='list-style-type:circle;margin:0'>";db+="<li>We have identified that the Beacon XML in not loaded from an Akamai Domain.</li>";db+="<li>Kindly use the same Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";bG(db,"ERROR")}}catch(da){}}function bN(){try{var da=n.beaconUrl.toLowerCase();var db="";if(da.indexOf(".edgesuite.net/")==-1&&da.indexOf(".edgekey.net/")==-1){db="Beacons sent to incorrect domain : "+da;db+="<ul style='list-style-type:circle;margin:0'>";db+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>";db+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";bG(db,"ERROR")}}catch(c9){}}function aW(){try{var c9="";for(var db in cq){if(cq[db]){if(!(db in bb)){if(c9){c9+=", "+db}else{c9=db}}}}if(c9){c9="Following dimensons have not being set : "+c9;c9+="<ul style='list-style-type:circle;margin:0'>";c9+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>";bG(c9,"INTEGRATION")}}catch(da){}}function l(dj){try{var da=dj.readyState;var dn=dj.status;if(da==4&&dn==200){var c9=dj.responseXML;if(c9){var dg;if(c9.documentElement){dg=c9.documentElement}else{dg=c9}if(dg){var dh=document.getElementsByTagName("script");var dq=0;var di=false;var dd="";var dl="";if(typeof(akamaiBCVideoObject)!="undefined"){if(bC){di=true;dl=bC}}else{if(k){di=S(k);dl=k}else{if(dh.length){for(dq=0;dq<dh.length;dq++){if((dh[dq].src!=null)){var dp=dh[dq].src;di=S(dp);if(di){dl=dp;break}}}}}}var db="";if(typeof(akamaiBCVideoObject)!="undefined"){db=dg.getElementsByTagName("brightcove")[0]}else{db=dg.getElementsByTagName("plugin")[0]}if(db){var dt=db.getAttribute("name");var dc=db.getAttribute("version");var df=db.getAttribute("link");var dk=db.getAttribute("size");var de=db.getAttribute("date");var dm="";bG("Integration Type : "+dt,"INTEGRATION");if(di){bG("Plugin path is correct ["+dl+"]","INTEGRATION")}else{dm="Incorrect Plugin Path";dm+="<ul style='list-style-type:circle;margin:0'>";dm+="<li>Kindly refer the Integration Guide and use the correct plugin path for integration</li>";dm+="<li>The plugin path should be one of the below :</li>";if(typeof(akamaiBCVideoObject)!="undefined"){dm+="<ul><li>http://79423.analytics.edgesuite.net/html5/brightcoveAkamaihtml5-min.js</li>";dm+="<li>https://79423.analytics.edgekey.net/html5/brightcoveAkamaihtml5-min.js</li></ul>"}else{dm+="<ul><li>http://79423.analytics.edgekey.net/html5/akamaihtml5-min.js</li>";dm+="<li>http://79423.analytics.edgekey.net/js/csma.js</li></ul>"}dm+="</ul>";bG(dm,"ERROR")}var ds=cb(bQ,dc);if(ds>=0){bG("Plugin is Latest (Version = "+bQ+" )","INTEGRATION")}else{dm="Old Plugin Version";dm+="<ul style='list-style-type:circle;margin:0'>";dm+="<li>Current Plugin Version is "+bQ+"</li>";dm+="<li>The latest plugin version in "+dc+" which was released on date "+de+"</li>";dm+="<li>Kindly check if proper path mentioned in integration guide is used for integration</li>";dm+="<li>If proper path is used, try by clearing browser cache.</li>";bG(dm,"ERROR")}}}}}}catch(dr){}}function S(e){if((e.indexOf("79423.analytics.edgesuite.net")!=-1)||(e.indexOf("79423.analytics.edgekey.net")!=-1)){if(e.indexOf("/html5/akamaihtml5-min.js")!=-1||e.indexOf("/js/csma.js")!=-1||e.indexOf("/js/brightcove-csma.js")!=-1){return true}}return false}function cb(c9,df){try{var dc=0;if(c9!=null&&df!=null){var dd=c9.split(".");var da=df.split(".");while(dd.length>da.length){da.push(0)}while(da.length>dd.length){dd.push(0)}for(var db=0;db<dd.length;db++){if(parseInt(dd[db])>parseInt(da[db])){dc=1;break}if(parseInt(dd[db])<parseInt(da[db])){dc=-1;break}}}}catch(de){}return dc}function cs(db,c9,e){var da;if(X){da=new XDomainRequest();da.onload=function(){bG("XML Request : xmlClient.onload");db("4","200",da.responseText)};da.onerror=function(dc){bG("Error, ais request")};da.open("GET",c9,e);da.send(null)}else{da=new XMLHttpRequest();da.responseType="json";da.open("GET",c9,e);if(da.overrideMimeType){da.overrideMimeType("application/json")}da.onreadystatechange=function(){db(da.readyState,da.status,da.responseText)};da.send(null)}}function cS(db,e,da,c9){if(aP){}else{aQ(db,e,da,c9)}}function aQ(de,c9,dd,db){if(de){bG("XML Request: isXDomainRequest = "+X+":::funcCallback =  :url: "+c9)}var dc;if(c9==null||c9=="undefined"||c9==""){return}try{if(X){dc=new XDomainRequest();if(de){dc.onprogress=function(){};dc.ontimeout=function(){};dc.onload=function(){bG("XML Request : xmlClient.onload");if(window.DOMParser){var dh=new DOMParser();var dg=dh.parseFromString(dc.responseText,"text/xml");var e={};e.status="200";e.readyState="4";e.responseXML=dg;e.responseText=dc.responseText;de(e)}else{var dg=new ActiveXObject("Microsoft.XMLDOM");dg.async=false;dg.loadXML(dc.responseText);var e={};e.status="200";e.readyState="4";e.responseXML=dg;de(e)}};dc.onerror=function(dg){bG("XML Request : Error, loading xml. url = :"+c9);if(c9.indexOf("serverIp")!=-1){ac=true}if(c9.indexOf("protocol-info")!=-1){c.fastTCPFailed=true}}}dc.open("GET",c9,!dd);try{if(db){setTimeout(function(){dc.send()},100)}else{dc.send(null)}}catch(df){try{dc.send(null)}catch(da){}}}else{dc=new XMLHttpRequest();dc.open("GET",c9,!dd);if(de){if(dc.overrideMimeType){dc.overrideMimeType("text/xml")}dc.onreadystatechange=function(){bG("XML Request : xmlClient.onreadystatechange");de(dc)}}dc.send(null)}}catch(df){bG("Exception,  XML Request for url :"+c9+",Exception:"+df)}}function ar(dm){var dv=dm.readyState;var ds=dm.status;bG("readConfig: readyState = "+dv+":::status = "+ds);try{if(dv==4&&ds==200){a8();var dq=dm.responseXML;if(dq){var dl;if(dq.documentElement){dl=dq.documentElement}else{dl=dq}var da=dl.getElementsByTagName("dataMetrics");for(var dz=0;dz<da.length;++dz){var dD=da[dz];var di=dD.parentNode;var c9=di.nodeName;bu[dz]=c9;var dw=bz[c9]=[];var dr=di.getAttribute("eventCode");if(dr){aj[c9]=dr}var dF=dD.getElementsByTagName("data");for(var dC=0;dC<dF.length;++dC){var dx=dF[dC];c9=dx.getAttribute("name");var du=dx.getAttribute("key");dr=dx.getAttribute("value");var dH=dx.getAttribute("sendOnce");var dG=dx.getAttribute("fallback");var dg=dx.getAttribute("size");var dy=dx.getAttribute("regExpJS");var dh=dx.getAttribute("expiry");var de={};de.name=c9;de.key=du;if(c9 in cq){cq[c9]=true}else{if(du.indexOf("_cd_")!=-1){cq[c9]=true}}if(dr){de.value=dr}if(dH){de.isSent=false;de.sendOnce=dH}if(dG){de.fallback=dG}if(dg){de.size=dg}if(dy){de.regExpJS=dy}if(dh){de.expiryDuration=parseInt(parseInt(dh)/1440)}dw.push(de)}}L.configDebug=parseInt(dl.getAttribute("debug"));if(L.configDebug!=1){L.configDebug=0}if(L.configDebug==1){aR()}if(dl.getElementsByTagName("isActive")[0]&&dl.getElementsByTagName("isActive")[0].childNodes[0]){b5=dl.getElementsByTagName("isActive")[0].childNodes[0].nodeValue}aS.beaconId=dl.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue;aS.beaconVersion=dl.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var dn=dl.getElementsByTagName("logTo")[0];n.logType=dn.getAttribute("logType");if(!n.logType){n.logType="relative"}n.logInterval=dn.getAttribute("logInterval")*1000;if(!n.logInterval){n.loginterval=300*1000}n.heartBeatInterval=dn.getAttribute("heartBeatInterval")*1000;if(!n.heartBeatInterval){n.heartBeatInterval=60*1000}n.secondaryLogTime=dn.getAttribute("secondaryLogTime")*1000;if(!n.secondaryLogTime){n.secondaryLogTime=15*1000}n.isSessionWithRebufferLimit=dn.getAttribute("isSessionWithRebufferLimit");if(!n.isSessionWithRebufferLimit){n.isSessionWithRebufferLimit=500}n.fastTCPEnabled=dn.getAttribute("fastTCPEnabled");if(!n.fastTCPEnabled){n.fastTCPEnabled=0}if(n.fastTCPEnabled==1){c.fastTCPEnabled=true}n.aisRequestLimit=dn.getAttribute("aisRequestLimit");if(!n.aisRequestLimit){n.aisRequestLimit=3}if(b4){b4.aisRequestLimit=n.aisRequestLimit}n.aisRequestInterval=dn.getAttribute("aisRequestInterval")*1000;if(!n.aisRequestInterval){n.aisRequestInterval=30*1000}if(b4){b4.aisRequestInterval=n.aisRequestInterval}n.startupTimeOutlierLimit=dn.getAttribute("startupTimeOutlierLimit")*1000;if(!n.startupTimeOutlierLimit){n.startupTimeOutlierLimit=600*1000}n.visitTimeout=dn.getAttribute("visitTimeout")*60*1000;if(!n.visitTimeout){n.visitTimeout=60*60*1000}n.urlParamSeparator=dn.getAttribute("urlParamSeparator");if(!n.urlParamSeparator){n.urlParamSeparator="~"}n.encodedParamSeparator=dn.getAttribute("encodedParamSeparator");if(!n.encodedParamSeparator){n.encodedParamSeparator="*@*"}n.initBrowserCloseTime=dn.getAttribute("initBrowserCloseTime");if(!n.initBrowserCloseTime){n.initBrowserCloseTime=15*60*1000}n.seekThreshold=dn.getAttribute("seekThreshold")*1000;if(!n.seekThreshold){n.seekThreshold=2000}var db=dn.getAttribute("delayTimer");if(db){bg.time=db}var dt=dn.getAttribute("disableDelay");if(dt==1){bg.enabled=false}var dd=dn.getElementsByTagName("host")[0].childNodes;if(dd.length>1){n.beaconUrl="";for(var dC=0;dC<dd.length;dC++){n.beaconUrl+=dd[dC].nodeValue}}else{n.beaconUrl=dn.getElementsByTagName("host")[0].childNodes[0].nodeValue}if((n.beaconUrl.indexOf("http://")==-1)&&(n.beaconUrl.indexOf("https://")==-1)){n.beaconUrl="http://"+n.beaconUrl}n.beaconUrl+=dn.getElementsByTagName("path")[0].childNodes[0].nodeValue;n.maxLogLineLength=dn.getAttribute("maxLogLineLength");if(!n.maxLogLineLength){n.maxLogLineLength=2048}n.maxLogLineLength-=n.beaconUrl.length;n.logVersion="2.0";n.formatVersion="1.1";if(dn.getElementsByTagName("formatVersion")&&dn.getElementsByTagName("formatVersion")[0]&&dn.getElementsByTagName("formatVersion")[0].childNodes[0]){n.formatVersion=dn.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue}n.useKey=parseInt(dl.getElementsByTagName("statistics")[0].getAttribute("useKey"));var dI=dl.getElementsByTagName("feedback")[0];if(dI!=null&&dI!==""){br.shouldSendFLine=true;br.limit=dI.getAttribute("limit");if(!br.limit){br.limit=3}br.socialShareLimit=dI.getAttribute("socialShareLimit");if(!br.socialShareLimit){br.socialShareLimit=1}}var dJ=dl.getElementsByTagName("security")[0];if(dJ!=null&&dJ!==""){var dA=dJ.getElementsByTagName("ViewerDiagnostics")[0];if(dA!=null&&dA!==""){aK.viewerDiagnostics={};var dc=dA.getElementsByTagName("salt")[0];if(dc!=null&&dc!==""){aK.viewerDiagnostics.salt={};var dj=dc.getAttribute("value");var dk=dc.getAttribute("version");if(dj!=null&&dj!==""){aK.viewerDiagnostics.salt.value=dj;aK.viewerDiagnosticsEnabled=true;if(dk!=null&&dk!==""){aK.viewerDiagnostics.salt.version=dk}aK.viewerDiagnostics.salt.bytes=dc.getAttribute("bytes")*2;if(!aK.viewerDiagnostics.salt.bytes){aK.viewerDiagnostics.salt.bytes=16*2}aK.viewerDiagnostics.salt.iterations=dc.getAttribute("iterations");if(!aK.viewerDiagnostics.salt.iterations){aK.viewerDiagnostics.salt.iterations=50}}else{aK.viewerDiagnosticsEnabled=false}}}}var df=dl.getElementsByTagName("bucketInfo")[0];cp.bucketLength=df.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue;cp.bucketCount=df.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue;cy=true;for(var dB in bb){try{if(dB.substring(0,4)=="_cd_"){cV(dB)}}catch(dE){}}o();bp();bN();var dp=dl.getElementsByTagName("match");for(var dC=0;dC<dp.length;dC++){match=dp[dC];try{parentKey=match.parentNode.parentNode.getAttribute("name");if(!bY[parentKey]){bY[parentKey]={}}bY[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(dE){bG(dE)}}a5();M();aO()}}}catch(dE){bG("Exception,  readConfig :"+dE)}}function cV(e){var da=bz.common;if(da!=null){var c9={};c9.name=e;c9.key=e;da.push(c9)}}function o(){try{var c9=bz.split;for(var da=0;da<c9.length;da++){bL[c9[da].name]=c9[da].key}}catch(db){}}function a5(){var dc={};try{if(!bY.bitRateBucketTimes){bY.bitRateBucketTimes={};dc=bY.bitRateBucketTimes;dc.U={key:"U",type:"range"};dc.S={key:"S",max:1500,value:"max:1500",type:"range"};dc.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"};dc.D={key:"D",min:2500,value:"min:2500",type:"range"}}else{var de,db,da;for(da in bY.bitRateBucketTimes){dc=bY.bitRateBucketTimes[da];if(dc){dc.key=da;if(!dc.value){dc.category="first"}else{de=dc.value;db=de.split(";");for(var c9=0;c9<db.length;c9++){if(db[c9].indexOf("min:")!=-1){dc.min=parseInt(db[c9].split(":")[1])}else{if(db[c9].indexOf("max:")!=-1){dc.max=parseInt(db[c9].split(":")[1])}}}}}}}cc.bitRateBucketMap={};for(var dd in bY.bitRateBucketTimes){cc.bitRateBucketMap[dd]=0}}catch(df){bG("Exception, find bit rate match rules :"+df)}}function M(){bG("fillVideoWithConfig function");if(aD&&aD.akamai){var e=aD.akamai;e.populateMetricsFromConfiguration();if(e.isSLineSent){w(aD)}if(aK.viewerDiagnosticsEnabled){bZ(e)}e.cdn=aJ(e)}}function aO(){bG("sendStoredBeacons: number of beacons to be sent = "+cO.length);try{var da=aD.akamai;while(cO.length>0){var c9=cO.shift();bG("readConfig: sending beacon event code = "+c9.code);c9.element.populateMetricsFromConfiguration();c9.element.xViewerId=cf.xViewerId;c9.element.xViewerIdVersion=cf.xViewerIdVersion;c9.element.cdn=aJ(c9.element);bW(c9.element,c9.code,c9.synch)}}catch(db){bG("Exception,  sendStoredBeacons"+db)}}cS(ar,aA.url,false,true);function aJ(db){if(bb.cdn){return bb.cdn}else{try{for(key in bY.cdn){var de=bY.cdn[key];if(de&&de.name&&de.value){var dd=db[de.name];var c9=de.value.split(",");for(var da=0;da<c9.length;da++){if(dd&&(dd.indexOf(c9[da].trim())!=-1)){return key;break}}}}}catch(dc){bG("Exception Get CDN"+dc.message)}}}function ax(da){var c9="";var e;if(da.indexOf("://")!=-1){e=da.indexOf("://");da=da.substring(e+3)}if(da.indexOf("/")!=-1){e=da.indexOf("/");if(da.indexOf("?")!=-1){var db=da.indexOf("?");e=(e<db)?e:db}c9=da.substring(0,e)}else{if(da.indexOf("?")!=-1){var e=da.indexOf("?");c9=da.substring(0,e)}else{c9=da}}return c9}function av(dd,dc,e,db){var da=dd.currentState;var c9=dd.seekObject;if(db=="S"&&c9.seekStartStreamTime==-1){c9.seekStartEpochTime=da.timeUpdateClockTime;c9.seekEndEpochTime=dc;c9.seekStartStreamTime=da.timeUpdateStreamTime;c9.seekEndStreamTime=e}else{if(db=="S"&&c9.seekEndStreamTime==da.timeUpdateStreamTime){c9.seekEndEpochTime=dc;c9.seekEndStreamTime=e}else{if(c9.seekStartStreamTime!=-1){dd.seekTime+=c9.seekEndEpochTime-c9.seekStartEpochTime;if(dd.seekIntervalsAsString!="-"){dd.seekIntervalsAsString+=","+c9.seekStartStreamTime+":"+c9.seekEndStreamTime}else{dd.seekIntervalsAsString=c9.seekStartStreamTime+":"+c9.seekEndStreamTime}if(dd.pauseSeekSession!="-"){dd.pauseSeekSession+=",S("+c9.seekStartStreamTime+":"+(c9.seekStartEpochTime-dd.startTimer)+"-"+c9.seekEndStreamTime+":"+(c9.seekEndEpochTime-dd.startTimer)+")"}else{dd.pauseSeekSession="S("+c9.seekStartStreamTime+":"+(c9.seekStartEpochTime-dd.startTimer)+"-"+c9.seekEndStreamTime+":"+(c9.seekEndEpochTime-dd.startTimer)+")"}++dd.seekCount;dd.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1}}}}}function T(da,c9){bG("set RebufferSession : curTime = "+c9);try{var dc=Math.round(c9-da.lastLogTime-da.curRebufferTime);var dd=Math.round(da.curRebufferTime);da.currRebufferEndEpoch=Math.round(c9);da.currRebufferStartEpoch=Math.round(c9-dd);if(dd>n.isSessionWithRebufferLimit){da.isSessionWithRebuffer=1}if(da.rebufferSession){da.rebufferSession=da.rebufferSession+";"+dc+":"+dd}else{da.rebufferSession=dc+":"+dd}}catch(db){bG("Error, set RebufferSession"+db.message)}}function cz(df,c9){var dc;var de;if(c9=="B"){var da="";if(df.rebufferSession){var e=df.rebufferSession.split(";");for(var db=0;db<e.length;db++){var dd=e[db].split(":");if(db==0){da+="0:"+dd[1]}else{da+=e[db]}if(db!=e.length-1){da+=";"}}bG("newRebufferSession = "+da);df.rebufferSession=da}de=1;dc=0}else{de=0;if(df.lastRebufferEndEpoch>0){dc=df.firstRebufferStartEpoch-df.lastRebufferEndEpoch}else{dc=-1}}df.rebufferSession=de+":"+dc+";"+df.rebufferSession;df.lastRebufferEndEpoch=df.currRebufferEndEpoch}function cm(dc,db){var c9=1;dc.rebufferSessionH=null;if(!dc.rebufferSessionArrayHLine||((dc.rebufferSessionArrayHLine)&&(dc.rebufferSessionArrayHLine.length===0))){return}while(dc.rebufferSessionArrayHLine[c9]&&((db-dc.rebufferSessionArrayHLine[c9])>(2*n.heartBeatInterval))){dc.rebufferSessionArrayHLine.shift();dc.rebufferSessionArrayHLine.shift();if(dc.isSessionWithRebufferH==1){dc.sendIsSessionWithRebufferH=0;dc.isSessionWithRebufferH=null}}while(dc.rebufferSessionArrayHLine[c9]){var e=db-dc.rebufferSessionArrayHLine[c9-1];var da=dc.rebufferSessionArrayHLine[c9]-dc.rebufferSessionArrayHLine[c9-1];if(dc.sendIsSessionWithRebufferH==1){if(da>n.isSessionWithRebufferLimit){dc.isSessionWithRebufferH=1}}if(dc.rebufferSessionH){dc.rebufferSessionH=dc.rebufferSessionH+";"+e+":"+da}else{dc.rebufferSessionH=e+":"+da}c9=c9+2}c9=c9-1;if(dc.rebufferSessionArrayHLine[c9]){var e=db-dc.rebufferSessionArrayHLine[c9];if(dc.sendIsSessionWithRebufferH==1){if(e>n.isSessionWithRebufferLimit){dc.isSessionWithRebufferH=1}}if(dc.rebufferSessionH){dc.rebufferSessionH=dc.rebufferSessionH+";"+e+":"+e}else{dc.rebufferSessionH=e+":"+e}}}function cx(e){if(bb.deliveryType){return bb.deliveryType}else{return e.deliveryType}}function b9(da){var e=da.readyState;var c9=da.status;if(parseInt(c9/100)===4||c9===0){bG("readServerIp: serverIpFailed request falied as status is ,in 400 series");ac=true}if(e==4&&c9==200){var dc=da.responseXML;if(dc){var db;if(dc.documentElement){db=dc.documentElement}else{db=dc}if(bK){cv.serverip=db.getElementsByTagName("ip")[0].childNodes[0].nodeValue}else{cv.serverip=db.getElementsByTagName("serverip")[0].childNodes[0].nodeValue}bG("readServerIp : diagnostics.serverip =  "+cv.serverip)}}}function ah(e){var db=e.akamai;if(ac){bG("getting ServerIp : serverIp request failed");return}if(db.hostName){try{var da=null;if(db.protocol){if(db.protocol.indexOf("rtmp")!=-1){da="http://"+db.hostName+"/fcs/ident";bK=true}else{da=db.protocol+"://"+db.hostName+"/serverip"}bG("getting ServerIp : serverIpPath = "+da);cS(b9,da,false,true)}}catch(c9){ac=true;bG("getting ServerIp: error, xmphttprequest")}}}function ag(da){var c9="";var dc=da.readyState;var db=da.status;if(parseInt(db/100)===4||db===0){bG("read fast tcp: fast tcp Failed request falied as status is 400 series");c.fastTCPFailed=true}try{if(dc==4&&db==200){var dg=da.responseXML;if(dg){bG("populating fast tcp");var dh;if(dg.documentElement){dh=dg.documentElement}else{dh=dg}if(dh&&dh.firstElementChild){var e=dh.firstElementChild;var dd="";var df="";if(e){if(e.hasAttribute("key")){df=e.getAttribute("key");dd=e.childNodes[0].nodeValue;c9=df+":"+dd}while(e.nextElementSibling){e=e.nextElementSibling;if(e.hasAttribute("key")){df=e.getAttribute("key");dd=e.childNodes[0].nodeValue;if(c9){c9+=","+df+":"+dd}else{c9=df+":"+dd}}}}}}}if(c9){c.ftcp=c9}}catch(de){bG("Exception,  read fast tcp"+de)}}function co(e){var db=e.akamai;if(c.fastTCPFailed){bG("getting fast tcp: request failed");return}if(db.hostName){try{var da=db.protocol+"://"+db.hostName+"/protocol-info";bG("getting fast tcp : fastTCPPath = "+da);cS(ag,da,false,true)}catch(c9){c.fastTCPFailed=true;bG("getting ServerIp: error, xmphttprequest")}}}function aN(c9,dc){try{var da=c9.akamai;if(n&&n.logInterval&&!dc){da.fastTCPServerIpTimer=bR(aN,n.logInterval,[c9])}if(!ac){ah(c9)}if(!c.fastTCPFailed&&c.fastTCPEnabled){co(c9)}if(ac&&c.fastTCPFailed){bU(da.fastTCPServerIpTimer)}}catch(db){bG("Exception get fast tcp server ip")}}function be(e){var c9=null;if(e.objectBased){if(e.errorReason){c9=e.errorReason}else{c9=ce[0]}}else{if(e.error&&e.error.code){c9=ce[e.error.code]}else{c9=ce[0]}}return c9}function af(c9){var e="Play.End.Detected";if(c9.objectBased){if(c9.endReason){e=c9.endReason}}return e}function z(){cf.viewerId=bb.viewerId?bb.viewerId:null;cf.viewerDiagnosticsId=bb.viewerDiagnosticsId?bb.viewerDiagnosticsId:(bb.viewerId?bb.viewerId:null)}function d(c9){var e=c7();return e}function aF(da){var dc=cf.viewerId;if(dc=="-"){return}if(!dc){try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId")){dc=window.localStorage.getItem("akamai_clientId")}else{if(C("HTML_ViewerId")){dc=C("HTML_ViewerId")}else{try{dc=c7();if(window&&window.localStorage){window.localStorage.setItem("akamai_clientId",dc)}try{bj("HTML_ViewerId",dc)}catch(db){}}catch(c9){bG("window.localStorage Exception :"+c9)}}}}catch(db){bG("Exception,  getting viewerId"+db);dc=c7()}}return dc}function bZ(de,db){var dd=null;if(cf&&cf.viewerDiagnosticsId){dd=cf.viewerDiagnosticsId}var c9="";var dc=50;var e=16*2;if(!dd||dd=="-"){return}if(db&&de.xViewerId){return}aX(de);bG("get Viewer DiagnosticsID");dd=encodeURIComponent(dd);if(aK&&aK.viewerDiagnostics&&aK.viewerDiagnostics.salt&&aK.viewerDiagnostics.salt.value){c9=aK.viewerDiagnostics.salt.value}if(aK&&aK.viewerDiagnostics&&aK.viewerDiagnostics.salt&&aK.viewerDiagnostics.salt.iterations){dc=aK.viewerDiagnostics.salt.iterations}if(aK&&aK.viewerDiagnostics&&aK.viewerDiagnostics.salt&&aK.viewerDiagnostics.salt.bytes){e=aK.viewerDiagnostics.salt.bytes}var da=by.PBKDF2(dd,c9,{keySize:e/8,iterations:dc});de.xViewerId=da;cf.xViewerId=da}function aX(c9){var e=null;if(aK&&aK.viewerDiagnostics&&aK.viewerDiagnostics.salt&&aK.viewerDiagnostics.salt.version){e=aK.viewerDiagnostics.salt.version}c9.xViewerIdVersion=e;cf.xViewerIdVersion=e}function cQ(da,db,c9){var e;if(db=="viewerId"||db=="clientId"||db=="viewerDiagnosticsId"){return}if(c9){if(bb[c9]){e=bb[c9]}else{if(da[c9]){e=da[c9]}}}da[db]=e}this.getValueFromQueryString=function(){return I(key,searchURL)};function I(da,de,dc){if(dc==null){dc=""}try{if(de==""||de==null){return}da=da.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var db=new RegExp("[\\?&]"+da+"=([^&#]*)");var c9=db.exec(de);if(c9==null){return dc}else{return c9[1]}}catch(dd){bG("Exception,  getValueFromQueryString :"+dd);return dc}}function bO(e){var c9=e.akamai;bU(c9.fastTCPServerIpTimer);if(aZ){aN(e)}}function bR(db,dd,da){try{var c9=null;c9=setTimeout(function(){db.apply(undefined,da)},dd);return c9}catch(dc){bG("Exception, set window timeout:"+dc);try{c9=window.setTimeout(function(){db.apply(undefined,da)},dd)}catch(dc){return null}return c9}}function bU(c9){try{clearTimeout(c9)}catch(da){bG("Exception clear window timeout:"+da);try{window.clearTimeout(c9)}catch(da){}}}function w(e){bG("startBeaconTImer");var c9=e.akamai;if(c9.areTimerStarted){return}bG("startBeaconTimer: starting beacon timer");c9.firstPLineTimer=bR(c2,n.secondaryLogTime,[e]);c9.hLineTimer=bR(cW,n.heartBeatInterval,[e]);c9.fastTCPServerIpTimer=bR(bO,(n.logInterval-5000),[e]);if(e.objectBased){J=500}c9.pollingTimer=bR(cG,J,[e]);c9.areTimerStarted=true}function bA(e){var c9=e.akamai;if(c9){if(c9.hLineTimer){bU(c9.hLineTimer)}if(c9.pollingTimer){bU(c9.pollingTimer)}if(c9.fastTCPServerIpTimer){bU(c9.fastTCPServerIpTimer)}if(c9.firstPLineTimer){bU(c9.firstPLineTimer)}if(b4&&b4.retryTimer){bU(b4.retryTimer)}}}function cZ(c9){var dc=c9.akamai;br.akamai={};br.dataSent={};dc.areTimerStarted=false;dc.isCLineSent=false;dc.isELineSent=false;dc.lastRebufferEndEpoch=0;dc.connectTime=0;bg.browserClose=false;dc.totalPlayClockTime=dc.totalStreamTime=dc.totalRebufferCount=dc.totalRebufferTime=0;dc.isVisitEnd=0;dc.sequenceId="0";aE(c9);dc.attemptId=dc.sessionId=d(dc);z();dc.clientId=dc.viewerId=aF(dc);bj("HTML_ViewerId",dc.clientId,395);if(aK.viewerDiagnosticsEnabled){bZ(dc)}else{}dc.lastPLineSentTime=dc.hLineSentCount=dc.lastSLineSentTime=dc.lastHLineSentTime=0;dc.lastHTime=0;V("HTML_LastCLineTime");bH=[0,0,0,0,0,0,0,0,0,0,0,0];var dd=parseInt(C("HTML_VisitCountCookie"));if(!dd||dd==""){dc.isVisitStart=1;dd=0;bj("HTML_VisitCountCookie",dd)}var de=parseInt(C("HTML_isPlayingCount"));if(!de||de==""){de=0;bj("HTML_isPlayingCount",de)}var e=C("HTML_VisitValueCookie");if(!e||e==""){bj("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0")}var db=C("HTML_BitRateBucketCsv");if(!db||db==""){bj("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0")}var da=C(ci);if(!da||da==""){dc.browserSessionId=dc.visitId=c7();bj(ci,dc.visitId)}else{dc.browserSessionId=dc.visitId=C(ci)}}function E(e,db){var da=e.akamai;da.isILineSent=true;++da.iLineCount;da.lastSLineSentTime=db;if(da.iLineCount==1){var dc=parseInt(C("HTML_VisitCountCookie"));++dc;bj("HTML_VisitCountCookie",dc);f=db}var c9=parseInt(C("HTML_VisitIntervalStartTime"));if(!c9||c9==" "){c9=db;bj("HTML_VisitIntervalStartTime",c9)}bH[0]=1;da.sendVLine=true}function ap(dd,dc){try{var db=aD.akamai;if(db.clearVisitTimeoutId){bU(db.clearVisitTimeoutId)}cZ(aD);db.logInterval="0";if(!cy){var da=cL(db);var c9={element:da,code:"init",synch:dd};cO.push(c9)}else{bW(db,"init",dd)}db.lastLogTime=dc;++db.sequenceId;E(aD,dc);db.currentState.state=cw.init;bG(": sendBeaconILineAd : Setting state to init");db.currentState.timeUpdateClockTime=dc;db.startTimer=dc}catch(de){bG("Exception, send I line AD:"+de)}}function c2(e){var da=b0();var c9=e.akamai;c9.lastPLineSentTime=da;t(e,"playing",false,da)}function u(df,dh,dc,db){try{bG("start of the session function");var dd=df.akamai;if(!dd||!dd.firstTimePlay){return}if(dd.adLoadTime&&dd.adLoadTime>dd.iLineSentTime){dd.startupTime=dd.adLoadTime-dd.iLineSentTime;if(dd.adEndTime){dd.startupTime+=dc-dd.adEndTime}}else{dd.startupTime=dc-dd.iLineSentTime}if(dd.startupTime>n.startupTimeOutlierLimit){dd.outlierStartupTime=dd.startupTime;dd.startupTime=0}dd.bufferingTime=dd.startupTime;var dg={type:"startup",startTime:0,endTime:dd.startupTime};aE(df);var da=A(df);b7(da,dd);dd.streamUrl=da;if(da!=null&&da.indexOf("?")!=-1){da=da.substring(0,da.indexOf("?"))}if(da!=null&&da!=""){if(/.m3u8$/.exec(da)){dd.format="L";dd.playerFormat=dd.playerType+":"+dd.format}else{dd.format="P";dd.playerFormat=dd.playerType+":"+dd.format;dd.deliveryType="O"}console.log("Creating hls stream");dd.stream=new hlsStream()}dd.streamLength=parseInt(F(df));dd.played=[];var c9=parseInt(C("HTML_isPlayingCount"));c9=c9+1;bj("HTML_isPlayingCount",c9);z();if(aK.viewerDiagnosticsEnabled){bZ(dd,true)}dd.lastSLineSentTime=dc;t(df,"playStart",false,dc);dd.rebufferSessionArrayHLine=[];dd.isSLineSent=true;if(cy){w(df)}bH[1]=1;dd.isFirstTitle=null;dd.isVisitStart=null;dd.firstTimePlay=false;dd.initPlayed(db)}catch(de){bG("Exception, send S line:"+de)}}function cU(c9,dc,db){try{bG("send beacon I line");var da=c9.akamai;da.cdn=aJ(da);if(aZ){aN(c9,true)}if(!da.iLineSentTime){da.iLineSentTime=db}if(c9.videoWidth&&c9.videoHeight){da.videoSize=c9.videoWidth+"x"+c9.videoHeight}if(!da.isILineSent){cZ(c9);t(c9,"init",dc,db);E(c9,db);if(da.clearVisitTimeoutId){bU(da.clearVisitTimeoutId)}}}catch(dd){bG("Exception send I line:"+dd)}}function cW(e){var da=e.akamai;da.hLineTimer=bR(cW,n.heartBeatInterval,[e]);var c9=b0();t(e,"heartBeat",false,c9);da.lastHLineSentTime=c9;da.hLineSentCount++;if((da.hLineSentCount%(n.logInterval/n.heartBeatInterval))==0){t(e,"playing",false,c9);da.lastPLineSentTime=c9}}function bE(c9,dd,dc,db){try{bG("sendBeaconCLine : endReasonCode = "+dd);var da=c9.akamai;da.endReasonCode=dd;t(c9,"complete",dc,db);var dg=parseInt(C("HTML_isPlayingCount"));dg=dg-1;bj("HTML_isPlayingCount",dg);da.isVisitStart=null;da.isCLineSent=true;da.firstTimePlay=true;bA(c9);var df=db;bj("HTML_LastCLineTime",df)}catch(de){bG("Exception, send beacon C Line:"+de)}}function g(c9,df,dc,db){try{var da=c9.akamai;if(df){da.errorCode=df}else{da.errorCode="UNKNOWN"}bG("sendBeaconELine : errorCode = "+da.errorCode);bH[3]=1;if(da.sequenceId==1){bH[11]=1;z();if(aK.viewerDiagnosticsEnabled){bZ(da,true)}}da.playerState="E";t(c9,"error",dc,db);if(da.isSLineSent){var dg=parseInt(C("HTML_isPlayingCount"));dg=dg-1;bj("HTML_isPlayingCount",dg)}da.isELineSent=true;da.isVisitStart=null;da.firstTimePlay=true;bA(c9);var de=db;ck(da);bj("HTML_LastCLineTime",de)}catch(dd){bG("Exception, send beacon E line:"+dd)}}function am(c9,dd){try{bG("sendBeaconVLine");var dc=c9.akamai;dc.isVisitEnd=1;p(dc);var da=parseInt(C("HTML_VisitIntervalStartTime"));dc.visitMaxPersistentBitRateBucket=cd();dc.visitInterval=dd-da;if(da==""||da==null||isNaN(da)){dc.visitInterval=dd-f}dc.sessionId=null;dc.attemptId=null;dc.sequenceId=null;V("HTML_BitRateBucketCsv");V("HTML_VisitValueCookie");V("HTML_VisitIntervalStartTime");V("HTML_LastCLineTime");V("HTML_VisitCountCookie");V("HTML_isPlayingCount");V(ci);t(c9,"visit",true,dd);br.akamai={};br.dataSent={};bG("sendBeaconVLine: beacon sent");dc.sendVLine=false;dc.iLineCount=0;bU(c9.akamai.clearVisitTimeoutId);var db=dc.isPlaylist;c9.akamai=new a2(aD);if(typeof(akamaiBCVideoObject)!="undefined"){c9.akamai.isPlaylist=db}}catch(de){bG("Exception, send beacon V line:"+de)}}function ab(){var e=C("HTML_VisitValueCookie");var dc=e.split("|");var dd;for(var da=0;da<bH.length;da++){D[da]+=bH[da]}bG("setVisitValueCookie :: visit values saved"+D);for(var db=0;db<dc.length;db++){dc[db]=parseInt(dc[db])+bH[db]}var c9=dc.join("|");bj("HTML_VisitValueCookie",c9)}function ba(){try{var dc=C("HTML_BitRateBucketCsv");var dd=ay.split(",");var c9=dc.split(",");var da=0;for(var db in cc.bitRatePlayTime){db=parseInt(db);da=parseInt((db-1)/500000);if(da>7){da=7}c9[da]=parseInt(c9[da])+cc.bitRatePlayTime[db];dd[da]=parseInt(dd[da])+cc.bitRatePlayTime[db]}dc=c9.join(",");bj("HTML_BitRateBucketCsv",dc);ay=dd.join(",")}catch(de){bG("Exception set bit rate bucketcsv"+de)}}function cj(e){bG("entered setVisitValueParameters");bH[4]=e.totalPlayClockTime;bH[5]=e.totalPlayStreamTime;bH[6]=e.totalRebufferCount;bH[7]=e.totalRebufferTime;bH[8]=e.totalAdPlayClockTime;bH[9]=e.totalAdStartCount;bH[10]=e.totalAdAbandonCount;if(e.totalPlayClockTime>5000){bH[2]=1}ba();ab()}function p(db){try{var dg=C("HTML_VisitValueCookie");var c9=dg.split("|");var dd=true;if(c9==""||c9==null){dd=false}var dh;var df=[];if(dd){df=c9}else{df=D}var de=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"];for(var da=0;da<de.length;da++){db[de[da]]=df[da]}}catch(dc){bG("Exception get visit value  cookie : "+dc)}}function cd(){try{var dd=C("HTML_BitRateBucketCsv");var da=dd.split(",");var c9=false;if(da==null||da==""){da=ay.split(",")}da[0]=parseInt(da[0]);var df="00",db=da[0];for(var dc=0;dc<da.length;dc++){da[dc]=parseInt(da[dc]);if(da[dc]>0){c9=true}if(db<da[dc]){db=da[dc];df="0"+dc}}if(c9){return df}}catch(de){bG("Exception, get visit max bit rate bucket"+de)}}function bk(db){try{var c9=encodeURI(db);c9=c9.replace(/#/g,"%23");return c9}catch(da){bG("Exception,  encoding beacon");return db}}function bc(){try{bG("send delayed beacon");if(bg.queue&&bg.queue.length>0){var c9=bg.queue.shift();bg.timer=bR(bc,bg.time,[]);bG("sending delayed beacon ::"+c9.url,"BEACON");cS(null,c9.url,c9.isSync)}else{bG("send delayed beacon : clear the timer");bU(bg.timer);bg.timer=null}}catch(da){}}function az(dd,dc,db){if(b5==0){bG("put beacon On Wire, dont send beacon isACtive is zero");return}var e=n.beaconUrl+"?"+dd;try{if(bg.enabled){var da={};if(bg.browserClose){if(bg.timer){bU(bg.timer)}if(bg.queue&&bg.queue.length>0){while(bg.queue.length>0){da=bg.queue.shift();bG("put beacon on wire, send beacon from queue::"+da.url,"BEACON");cS(null,da.url,da.isSync)}}bG("put beacon on wire browser close::"+e,"BEACON");cS(null,e,dc)}else{bG("put beacon on wire pushing beacon in queue::"+e);da.url=e;da.isSync=dc;bg.queue.push(da);if(bg.timer){bG("put beacon on wire: timer is running")}else{bG("put beacon on wire: call send delayed beacon");bc()}}}else{bG("put beacon on wire"+e,"BEACON");cS(null,e,dc)}}catch(c9){bG("failed to send beacon");bG(c9)}}function cK(c9,da){try{c9=c9.substring(0,da);return c9}catch(db){bG("Exception,  getTruncatedMetric"+db);return c9}}function c3(df,dd,c9,de){try{var db;for(var dc=0;dc<dd.length;dc++){if(dd[dc].expiryDuration){c0(df,dd[dc])}db=dd[dc].name;var da=null;if(db in df){da=df[db]}if(dd[dc].value){da=dd[dc].value}if(da||da==0){if(dd[dc].sendOnce){if(dd[dc].isSent===false){if(da!=0){dd[dc].isSent=true}i(da,dd,db,dc,de,c9)}}else{i(da,dd,db,dc,de,c9)}}}}catch(dg){bG("Exception, assemble logs:"+dg)}}function i(df,dg,da,dc,c9,dd){try{if(dg[dc].regExpJS){var dh=new RegExp(dg[dc].regExpJS);var db=dh.exec(df);if(db){df=db[db.length-1]}}}catch(de){bG("Exception,  evaluating regExpJS attribute for metric : "+da)}df=String(df).replace(/~/g,n.encodedParamSeparator);if(dg[dc].size){df=cK(df,dg[dc].size)}if(dg[dc].key in c9){}else{c9[dg[dc].key]=dg[dc].key;dd.push((n.useKey?dg[dc].key:da)+"="+df)}}function bW(dj,df,de){try{bG("getBeaconStrings : eventCode =  "+df);var dc=bz.common;var dv=[];var di=bz[df];if(di==null||di=="undefined"){bG("getbeaconstrings, return as eventmetrics undefined");return}var dn=[];var du={};if(!dj.eventCode){dj.eventCode=aj[df]}c3(dj,dc,dv,du);if(df=="error"){dj.updateTerminateMetrics();cj(dj,bH)}if(df=="complete"){dj.updateTerminateMetrics();var c9=bz.playing;cj(dj,bH);c3(dj,c9,dn,du)}c3(dj,di,dn,du);var dm=dv.join(n.urlParamSeparator);dm=bk(dm);var ds=0;try{for(var dq in bL){if(n.useKey){ds+=bL[dq].length+3+n.urlParamSeparator.length}else{ds+=dq.length+3+n.urlParamSeparator.length}}}catch(dt){ds=12}ds--;var dh=n.maxLogLineLength-ds-dm.length-3-n.beaconUrl.length;if(dh<=0){dh=4780-ds-dm.length-3-n.beaconUrl.length}var dp=[];var dl="";if(dh>0){if(dn.length>0){var dr;var da="";var dd="";for(dr=0;dr<dn.length;dr++){dd=bk(dn[dr]);if(dd.length>=dh){dp.push(dd)}else{if(da.length+dd.length<=dh){if(da){da+=n.urlParamSeparator+dd}else{da=dd}}else{dp.push(da);da=""}}}if(da!=""){dp.push(da)}}var db=dp.length;if(db>1){for(var dk=1;dk<=db;++dk){dl=dm+n.urlParamSeparator;dl+=((n.useKey?bL.partNumber:"partNumber")+"="+dk)+n.urlParamSeparator;dl+=((n.useKey?bL.totalParts:"totalParts")+"="+db)+n.urlParamSeparator;dl+=dp[dk-1];dl+=n.urlParamSeparator;if(bz[df]){az(dl,de,dj)}}}else{dl=dm+n.urlParamSeparator+dp[0]+n.urlParamSeparator;az(dl,de,dj)}}else{var dg=dn.join(n.urlParamSeparator);dg=bk(dg);dl=dm+n.urlParamSeparator+dg+n.urlParamSeparator;if(bz[df]){az(dl,de,dj)}}}catch(dt){bG("Exception, get beacon Strings:"+dt)}}function ck(e){br.fLineCount=0;var c9=cL(e);br.akamai=c9;br.akamai.customDataPopulated=false}function v(){try{var dd="socialShare:";var c9=dd.length;var da=br.socialSharingObj;for(var db in bb){if(db.indexOf(dd)!=-1){if(db in br.dataSent){if(br.dataSent[db].count<br.socialShareLimit){++br.dataSent[db].count;if(da==null){da[db.substring(c9)]=bb[db]}else{if(db.substring(c9) in da){da[db.substring(c9)]=parseInt(da[db.substring(c9)])+parseInt(bb[db])}else{da[db.substring(c9)]=bb[db]}}}}else{br.dataSent[db]={};br.dataSent[db].value=bb[db];br.dataSent[db].count=1;da[db.substring(c9)]=bb[db]}delete bb[db]}}br.socialSharingObj=da}catch(dc){bG("Exception,  getFeedbackObj"+dc);br.socialSharing=null}}function c4(da){try{var dc=null;if(br.socialSharingObj!=null){for(var c9 in br.socialSharingObj){if(dc==null){dc=c9+":"+br.socialSharingObj[c9]+","}else{dc+=c9+":"+br.socialSharingObj[c9]+","}}}if(dc!=null){da.socialSharing=dc.substring(0,dc.length-1)}}catch(db){bG("Exception,  getFeedbackData"+db);da.socialSharing=null}br.socialSharingObj={}}function bJ(db){try{for(var da in bz){if(bz[da]){for(var c9=0;c9<bz[da].length;c9++){if(bz[da][c9].fallback&&!bb[bz[da][c9].name]){cQ(db,bz[da][c9].name,bz[da][c9].fallback)}}}}}catch(dc){}}function a1(da){try{var c9=W.streamName?W.streamName:da.streamName}catch(db){}try{if(bb.title){da.title=bb.title}else{da.title=bb.eventName?bb.eventName:c9}if(bb.eventName){da.eventName=bb.eventName}else{da.eventName=bb.title?bb.title:c9}}catch(db){bG("Exception,  getting title and eventName, "+db)}}function a6(de,dh,db,c9){bG("updating metrics for playing and end events");var dd=de.akamai;var df=0;var dg=dd.playerState;var da=true;dd.currentStreamTime=parseInt(aB(de));switch(dd.currentState.state){case cw.playing:dd.playerState="PL";if(dh-dd.seekTime>0){dd.updatePlayClockTime(dh-dd.seekTime,dd.currentState.lastEventClockTime,db)}if(dd.playClockTime<0){dd.playClockTime=0}dd.updatePlayed(dd.currentStreamTime);break;case cw.pause:dd.pauseDuration+=dh;dd.playerState="PS";break;case cw.rebuffering:dd.rebufferTime+=dh;dd.curRebufferTime+=dh;T(dd,db);dd.playerState="B";df=db-dd.curRebufferTime;break;case cw.resumeBuffering:dd.playerState="RB";dd.resumeBufferTime+=dh;break;case cw.ended:dd.updatePlayed(dd.currentStreamTime);break;case cw.seek:if((db-dd.currentState.timeUpdateClockTime)>0){av(dd,db,dd.currentStreamTime,"S")}dd.currentState.timeUpdateClockTime=db;dd.playerState="SK";break;default:da=false;break}cc.getTransitionSession(dd);av(dd);if(dd.rebufferSession){cz(dd,dg);dd.firstRebufferStartEpoch=df}if(dd.playClockTime>5000){dd.isView=1}if(da){dd.currentState.lastEventClockTime=db}dd.bytesLoaded=ca(de);if(dd.played){var e=dd.played;dd.playStreamTime=0;for(var dc=0;dc<e.length;dc++){dd.playStreamTime+=parseInt(e[dc][1]-e[dc][0])}if(dd.logType=="R"){dd.playStreamTime-=dd.lastPlayStreamTime;dd.lastPlayStreamTime+=dd.playStreamTime}}if(c9&&dd.endReasonCode!="Browser.Close"&&!dd.streamTitleSwitchReason){dd.playerState="E"}}function cY(db){try{var c9="-";if(document&&document.referrer){var da=document.referrer;da=da.split("/",3);if(da&&da[2]){c9=da[2]}}if(window==window.top){db.pageUrl=bb.pageUrl?bb.pageUrl:document.URL;db.pageHost=(bb.pageUrl&&ax(bb.pageUrl))?ax(bb.pageUrl):document.location.hostname;db.pageReferrer=bb.pageReferrer?bb.pageReferrer:(document.referrer?document.referrer:"-");db.pageReferrerHost=(bb.pageReferrer&&ax(bb.pageReferrer))?ax(bb.pageReferrer):(document.referrer?c9:"-")}else{db.pageUrl=bb.pageUrl?bb.pageUrl:(document.referrer?document.referrer:"-");db.pageHost=(bb.pageUrl&&ax(bb.pageUrl))?ax(bb.pageUrl):(document.referrer?c9:"-");db.pageReferrer=bb.pageReferrer?bb.pageReferrer:"NA";db.pageReferrerHost=(bb.pageReferrer&&ax(bb.pageReferrer))?ax(bb.pageReferrer):"NA"}}catch(dc){}}function a0(da){try{var c9;for(c9 in W){if((c9!="viewerId")&&(c9!="clientId")&&(c9!="viewerDiagnosticsId")&&(c9!="pluginVersion")){da[c9]=W[c9]}}if("pluginVersion" in W){da.pluginVersion=bQ+":"+W.pluginVersion}}catch(db){}}function cB(dc,db){bG("populate custom data, eventCode = "+db);try{cY(dc);dc.deliveryType=cx(dc);dc.device=bb.device?bb.device:aU;if(db=="playing"||db=="complete"||db=="feedback"||db=="error"){c4(dc);if((dc.socialSharing==null||dc.socialSharing=="")&&db=="feedback"&&(!dc.customDataChanged)){--br.fLineCount;return}}var da;for(da in bb){if((da!="viewerId")&&(da!="clientId")&&(da!="viewerDiagnosticsId")){if(!(da in ch)){dc[da]=bb[da]}}}if(b4&&b4.akamai){for(var c9 in b4.akamai){dc[c9]=b4.akamai[c9]}}a1(dc);dc.cdn=aJ(dc)}catch(dd){bG("Exception,  populate Custom Data , "+dd)}}function t(dh,de,dg,dc){try{bG("sendBeacon: eventCode = "+de+", clocktime = "+dc);var dd=dh.akamai;var dk=dc-dd.currentState.lastEventClockTime;if(de!="init"){dd.logInterval=(dd.lastLogTime<=0)?"0":(dc-dd.lastLogTime)/1000}else{dd.logInterval="0"}if(!dd.customDataPopulated){cB(dd,de)}dd.serverIp=(cv.serverip)?cv.serverip:"-";dd.fastTCP=(c.ftcp)?c.ftcp:"-";dd.eventCode=aj[de];if(dd.hLineSentCount>0){dd.lastHTime=(dc-dd.lastHLineSentTime)/1000}else{dd.lastHTime=(dc-dd.lastSLineSentTime)/1000}if(de=="heartBeat"){var dj=dd.logInterval;dd.logInterval=(dc-dd.lastPLineSentTime)/1000;cm(dd,dc)}if(dd.logInterval<0){dd.logInterval="0"}var db=false;if(de=="complete"){de="playing";db=true}dd.endOfStream=dh.ended?"1":"0";dd.currentClockTime=dc-dd.startTimer;dd.currentStreamTime=parseInt(aB(dh));if(de=="playing"&&!dd.playEndMetricsUpdated){if(db){cm(dd,dc)}bG("send Beacon, updating play and end metrics");a6(dh,dk,dc,db);aE(dh)}if(!dd.customDataPopulated){bJ(dd)}a0(dd);if(!cy){var di=cL(dd);var c9={element:di,code:(db)?"complete":de,synch:dg};cO.push(c9);if(de=="playing"||de=="playStart"){dd.clearRelativeMetrics()}if(de!="heartBeat"){bG("send beacon :configurationPopulated false sequenceId = "+dd.sequenceId);++dd.sequenceId;dd.lastLogTime=dc}else{dd.logInterval=dj}return}if(de=="playStart"){aW()}dd.populateMetricsFromConfiguration();dd.xViewerId=cf.xViewerId;dd.xViewerIdVersion=cf.xViewerIdVersion;if(typeof akaMediaAnalytics!="undefined"&&akaMediaAnalytics!=null){var da=akaMediaAnalytics.getStream();if(da){dd.bandwidth=da.getBandwidthFromFragments();bG("reporting bandwidth = "+dd.bandwidth);da.cleanupFragments()}}if(db){bW(dd,"complete",dg)}else{bW(dd,de,dg)}dd.qualityOfExperience=null;db=false;if(de=="playing"||de=="playStart"){dd.clearRelativeMetrics()}if(de!="heartBeat"){++dd.sequenceId;dd.lastLogTime=dc}else{dd.logInterval=dj}}catch(df){bG("Exception, send beacon:"+df)}}function cL(da,dc){var dc=dc||{};try{for(var c9 in da){if((typeof da[c9]==="object")&&(da[c9])){dc[c9]=(da[c9].constructor===Array)?[]:{};cL(da[c9],dc[c9])}else{dc[c9]=da[c9]}}return dc}catch(db){}}this.logMessage=function(c9,e){bG(c9,e)};function bG(dd,da){try{if(L.configURLCsmaDebug==1||L.pageURLCsmaDebug==1||L.configDebug==1){try{if(L.printException){if(dd.indexOf("Exception")!=-1){da="ERROR"}}}catch(dc){}try{U(dd,da)}catch(c9){}try{console.log(dd)}catch(c9){}}else{if(!cy){var db={message:dd,msgType:da};x.push(db)}}}catch(c9){}}function U(da,e){if(e==null||e==""){e="TRACE"}if(da==null||da==""){return}if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){AkamaiAnalytics_debugWindow_appendLog(da,e)}else{var c9={message:da,msgType:e};x.push(c9)}}function bp(){try{if(L.configURLCsmaDebug==1||L.pageURLCsmaDebug==1||L.configDebug==1){if(L.logStoredMsg){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){if(L.logTimer){bU(L.logTimer)}L.logStoredMsg=false;if(x.length){for(var c9=0;c9<x.length;c9++){bG(x[c9].message,x[c9].msgType)}x=[]}}else{L.logTimer=bR(bp,1000,[])}}}}catch(da){}}var bf,a,ad;var ci="AkamaiAnalytics_BrowserSessionId";var bB=null;var aG=null;var bV=null;var cE=null;var cM=null;var aU=null;var bi=null;if(navigator&&navigator.userAgent){bi=navigator.userAgent}function cr(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent;var dc=/\((\w+)/;var da=dc.exec(e);aG=da[1].toLowerCase();if(e.indexOf("Xbox")!=-1){aG="Xbox"}else{if(aG.indexOf("compatible")!=-1||aG.indexOf("windows")!=-1||aG.indexOf("mobile")!=-1){aG="Windows"}else{if(aG.indexOf("x11")!=-1){aG="Linux"}else{if(aG.indexOf("macintosh")!=-1||aG.indexOf("mac os")!=-1||aG.indexOf("macos")!=-1){aG="Mac OS"}else{if(aG.indexOf("ipad")!=-1){aG="iPad"}else{if(aG.indexOf("iphone")!=-1){aG="iPhone"}else{if(aG.indexOf("ipod")!=-1){aG="iOS"}else{if(e.indexOf("Android")!=-1){aG="Android"}else{if(e.indexOf("PlayStation 4")!=-1){aG="PlayStation 4"}else{if(e.indexOf("PLAYSTATION 3")!=-1){aG="PlayStation 3"}else{aG="Others"}}}}}}}}}}}catch(db){bG("Exception,  finding Osname");aG="Others"}bV=aG;try{dc=/(NT|Phone|OS X|Linux|CPU.*?OS) ([0-9\._]+)/;da=dc.exec(e);if(da&&da.length>2){cM=da[2]?da[2]:"";if(cM){bV+=" "+cM}var c9=null;if(aG=="Windows"){c9=a3(cM);aG=aG+" "+c9}}}catch(db){bG("Exception,  OSVersion"+db)}}}function a3(c9){var da=null;if(c9){if(c9=="6.3"||c9=="6.2"){da="8"}else{if(c9=="6.1"){da="7"}else{if(c9=="6.0"){da="Vista"}else{if(c9=="5.2"||c9=="5.1"){da="XP"}else{var e=c9.split(".");if(parseInt(e[0])>=8){da=e[0]}else{da="Other"}}}}}}return da}function N(){if(navigator&&navigator.userAgent){var e=navigator.userAgent;var dd=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var da=dd.exec(e);bB=da[1];if(da[1]=="Version"){dd=/(Opera|Safari)/;var df=dd.exec(e);bB=df[1]}}catch(dc){bG("Exception,  browserName"+dc)}try{bG("browser version = "+da[2]);var c9=e.indexOf("Edge");if(c9!=-1){uagentLength=e.length;var de=e.substr(c9,uagentLength-c9);var db=de.split("/");bB=db[0];cE=db[1]}else{cE=da[2]}if(bB&&cE){bB=bB+" "+cE}}catch(dc){bG("Exception,  browserVersion"+dc)}}}function bI(){if(navigator&&navigator.userAgent){try{var c9=navigator.userAgent;c9=c9.toLowerCase();if(c9.indexOf("ipad")!=-1){aU="iPad"}else{if(c9.indexOf("ipod")!=-1){aU="iPod"}else{if(c9.indexOf("iphone")!=-1){aU="iPhone"}else{if(c9.indexOf("android")!=-1){aU="Android Device"}else{if(c9.indexOf("xbox")!=-1){aU="Xbox"}else{if(c9.indexOf("macintosh")!=-1||c9.indexOf("windows")!=-1||c9.indexOf("compatible")!=-1){aU="Desktop"}else{if(c9.indexOf("playstation 4")!=-1){aU="PlayStation 4"}else{if(c9.indexOf("playstation 3")!=-1){aU="PlayStation 3"}else{aU="Others"}}}}}}}}}catch(da){bG("Exception,  getitng device name : "+da);aU="Others"}}}cr();N();bI();var cw={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6};function cH(c9){try{switch(c9){case cw.ended:return"ended";break;case cw.init:return"init";break;case cw.playing:return"playing";break;case cw.pause:return"pause";break;case cw.seek:return"seek";break;case cw.rebuffering:return"rebuffering";break;case cw.resumeBuffering:return"resumeBuffering";break;default:return"undefined";break}}catch(da){}}var bH=[0,0,0,0,0,0,0,0,0,0,0,0];var D=[0,0,0,0,0,0,0,0,0,0,0,0];var f;var ay="0,0,0,0,0,0,0,0";function a2(e){if(e&&e.customMetrics){for(var c9 in e.customMetrics){if(!(c9 in ch)){this[c9]=e.customMetrics[c9]}}}this.userAgent=bi;this.playerType="HTML5";this.pluginVersion=bQ;this.os=aG;this.fullOs=bV;this.osVersion=cM;this.browser=bB;this.browserVersion=cE;this.browserSize=window.innerWidth+"x"+window.innerHeight;this.rebufferCount=0;this.bytesLoadedCallback=0;this.lastBytesLoaded=0;this.currRebufferEndEpoch=0;this.totalPlayClockTime=0;this.totalPlayStreamTime=0;this.totalRebufferCount=0;this.totalRebufferTime=0;this.totalPauseCount=0;this.totalPauseDuration=0;this.totalSeekCount=0;this.totalSeekTime=0;this.totalResumeBufferCount=0;this.totalResumeBufferTime=0;this.totalAdPlayClockTime=0;this.totalAdStartCount=0;this.totalAdAbandonCount=0;this.updateTerminateMetrics=function(){try{if(this.playClockTime){this.totalPlayClockTime+=parseInt(this.playClockTime)}if(this.playStreamTime){this.totalPlayStreamTime+=parseInt(this.playStreamTime)}if(this.rebufferCount){this.totalRebufferCount+=parseInt(this.rebufferCount)}if(this.rebufferTime){this.totalRebufferTime+=parseInt(this.rebufferTime)}if(this.pauseCount){this.totalPauseCount+=parseInt(this.pauseCount)}if(this.pauseDuration){this.totalPauseDuration+=parseInt(this.pauseDuration)}if(this.seekCount){this.totalSeekCount+=parseInt(this.seekCount)}if(this.seekTime){this.totalSeekTime+=parseInt(this.seekTime)}if(this.resumeBufferCount){this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)}if(this.resumeBufferTime){this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)}if(this.adPlayClockTime){this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)}if(this.adCount){this.totalAdStartCount+=parseInt(this.adCount)}if(this.adAbandonCount){this.totalAdAbandonCount+=parseInt(this.adAbandonCount)}var da=b0();this.startupAbondonWaitTime=da;this.playInterval=da}catch(db){bG("Unable to update cumulative metrics")}};this.clearRelativeMetrics=function(){var da=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var db=0;db<da.length;++db){this[da[db]]=0}this.pauseIntervalsAsString="-";this.seekIntervalsAsString="-";this.pauseSeekSession="-";this.transitionStreamTimeSession="-";this.socialSharing=null;this.adSession=null;br.socialSharing=null;br.socialSharingObj={};cc.bitRateArr=[];delete this.rebufferSession};this.populateMetricsFromConfiguration=function(){this.beaconId=aS.beaconId;this.beaconVersion=aS.beaconVersion;this.logType=(n.logType=="relative")?"R":"C";this.logVersion=n.logVersion;this.startupTimeOutlierLimit=n.startupTimeOutlierLimit;this.formatVersion=n.formatVersion;this.bucketCount=cp.bucketCount;this.bucketLength=cp.bucketLength;for(var db in bz){if(bz[db]){for(var da=0;da<bz[db].length;da++){if(bz[db][da].value){this[bz[db][da].name]=bz[db][da].value}}}}};this.initPlayed=function(da){this.played.push([da,da]);this.playingIndex=0};this.updatePlayClockTime=function(db,da,dc){this.playClockTime+=db;cc.updateBitRateArr(db)};this.updatePlayed=function(da,dd){var dc=this.played;if(!dc){return}for(var db=0;db<dc.length;db++){}for(var db=this.playingIndex;db<dc.length&&da>dc[db][0];db++){}if(db!=this.playingIndex){dc[this.playingIndex][1]=Math.max(da,dc[db-1][1]);dc.splice(this.playingIndex+1,db-this.playingIndex-1)}else{dc[this.playingIndex][1]=Math.max(da,dc[this.playingIndex][1])}if(dd==null){return}for(db=0;db<dc.length;db++){if(dc[db][0]<=dd&&dc[db][1]>=dd){this.playingIndex=db;return}else{if((db+1)<dc.length&&dc[db][1]<dd&&dc[db+1][0]>dd){db++;this.playingIndex=db;dc.splice(db,0,[dd,dd]);return}}}if(db==dc.length){dc.push([dd,dd]);this.playingIndex=db}};this.isVisitEnd=0;this.sequenceId="0";this.isSLineSent=false;this.sendVLine=false;this.played=[];this.iLineCount=0;this.isPlaylist=false;this.isFirstTitle=1;this.currentState={state:cw.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0};this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1};this.clearRelativeMetrics();bG("value of configurationPopulated"+cy);if(cy){this.populateMetricsFromConfiguration()}this.loadStartILine=false;this.canPlayUpdated=false;this.canPlayEventAutoPlay=true;this.format="P";this.playerFormat=this.playerType+":"+this.format;this.deliveryType="O";this.firstTimeProgress=true;this.firstTimePlay=true;this.isILineSent=false;this.seekFrom=0;this.lastPlayStreamTime=0;this.lastPlayLogTime=0;this.lastLogTime=0;this.curRebufferTime=0;this.sendIsSessionWithRebufferH=1}aD.akamai=new a2(aD);function cD(){try{var da,c9;for(da in bz){if(bz[da]){for(c9=0;c9<bz.length;c9++){if(bz[da][c9].isSent&&bz[da][c9].isSent===true){bz[da][c9].isSent=false}}}}}catch(db){}}function a7(dd){bG("endOfTheSession");var dc=dd.akamai;var de=dc.isPlaylist;var da=dc.visitId;var e=dc.viewerId;var db=dc.streamName;var dg=dc.cdn;var df=dc.sendVLine;var c9=dc.iLineCount;dd.akamai=null;cD();dc=dd.akamai=new a2(dd);dc.visitId=dc.browserSessionId=da;dc.viewerId=dc.clientId=e;dc.cdn=dg;aI=-1;dc.streamName=db;dc.iLineCount=c9;dd.akamai.clearVisitTimeoutId=bR(cP,n.visitTimeout,[dd,1]);dc.sendVLine=df;dc.isPlaylist=de;if(dd.played){dd.played.length=0}cc.clearBitRate()}function bw(){try{if(this.readyState==4&&this.status==200&&this.responseText){var de=this.akamai;var c9=this.responseText.split("\n");var dg="";var dd=/PROGRAM-ID=(\d+)/;var da,db;if(c9){for(db=0;db<c9.length;db++){if((da=dd.exec(c9[db]))){if(da[1]==dg){break}else{dg=da[1]}}}if(db!=c9.length){de.format="L";de.playerFormat=de.playerType+":"+de.format}}dd=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m;bG("Checking");if((da=dd.exec(this.responseText))){bG("Checking done "+da[4]);if(/.m3u8$/.exec(da[4])){try{var dc=new XMLHttpRequest();dc.open("GET",da[4],true);dc.onreadystatechange=function(){console.log("current content type from stream url is = "+this.getResponseHeader("content-type"));if(this.readyState==4&&this.status==200){if(this.responseText){if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){de.deliveryType="O"}}}};if(dc.overrideMimeType){dc.overrideMimeType("text/plain")}dc.send(null)}catch(df){bG("parsePlaylist, Exception,  parsing play list, "+df)}}else{if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){de.deliveryType="O"}}}}}catch(df){bG("Exception,  parsePlaylist : "+df)}}var ce=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];function bT(e){if(cg&&cg.dataset&&cg.dataset.isad&&cg.dataset.isad=="true"){return true}else{return false}}function b2(da,c9,dd,dc){if(c9=="playing"){ct=[]}var db={};db.eventType=c9;db.eventTime=dc;if(dd){db.streamUrl=dd}if(c9=="error"){db.errorCode=be(da)}if(ct&&ct.length>0){var e=ct[ct.length-1];if(e.eventType==db.eventType&&e.streamUrl==db.streamUrl){if(c9=="error"){e.errorCode=db.errorCode}e.eventTime=db.eventTime}else{ct.push(db)}}else{ct.push(db)}}function P(c9,dg,df,db){try{var de=false;if(ct.length>0){var da=ct[ct.length-1];bG("check error events array, previous event is : "+da.eventType);if(da.eventType=="error"&&df==da.streamUrl){if(dg=="error"){var dd=be(c9);if(da.errorCode==dd){de=true}else{de=false}da.eventTime=db;da.errorCode=dd}else{if(dg=="play"&&da.eventTime&&(db-da.eventTime<=2000)){de=true}}}}}catch(dc){bG("Exception,  checkErrorEventsArray"+dc);de=false}return de}function bx(da){if(bT(da)){bG("handle Seeking Event : video tag is of type AD, return");return}try{var dc=b0();var c9=parseInt(aB(da));var de=da.akamai;var db=de.currentState;var dh=dc-db.lastEventClockTime;var dd=dc-de.startTimer;var df=db.state;if(db.state==cw.playing){de.updatePlayClockTime(dh,db.lastEventClockTime,dc)}if(de.isPlaylist&&(db.state==cw.ended)&&(de.browser=="Safari")){}db.lastEventClockTime=dc}catch(dg){bG("Exception,  handle Seeking Event : "+dg)}}function Z(da,dc,c9){if(bT(da)){bG("handle Seeked Event : video tag is of type AD, return");return}try{if(!dc){dc=b0()}if(!c9){c9=parseInt(aB(da))}var de=da.akamai;var db=de.currentState;var dh=dc-db.lastEventClockTime;var dd=dc-de.startTimer;var df=db.state;bG("entered function handle Seeked Event, currentstate = "+cH(db.state));if(df==cw.pause||df==cw.playing||df==cw.rebuffering||db.state==cw.seek){if((dc-db.timeUpdateClockTime)>0){av(de,dc,c9,"S")}switch(df){case cw.playing:de.updatePlayed(db.timeUpdateStreamTime,c9);db.lastEventClockTime=dc;de.updatePlayClockTime(dh,db.lastEventClockTime,dc);db.state=cw.seek;db.seekStartStreamPos=c9;break;case cw.rebuffering:bG("handle seeked event, previous state is rebuffering");de.rebufferTime+=dh;de.curRebufferTime+=dh;if(de.rebufferSessionArrayHLine){de.rebufferSessionArrayHLine.push(dc)}try{T(de,dc);de.curRebufferTime=0}catch(dg){bG("Error...Play"+dg.message)}db.lastEventClockTime=dc;db.state=cw.seek;break}}}catch(dg){bG("Exception,  handle Seeked Event :"+dg)}}function ae(da,di){if(bT(da)){bG("handlePauseEvent : video tag is of type AD, return");return}try{bG("entered function handle Pause Event");var dc=b0(di);var c9=parseInt(aB(da));var dg=da.akamai;var db=dg.currentState;var dd=F(da);if(dg.firstTimePlay||db.state==cw.pause){return}if(dd&&dd!=0&&c9&&c9!=0){if(Math.abs(dd-c9)<1000){return}}var dj=dc-db.lastEventClockTime;var de=dc-dg.startTimer;var df=db.state;switch(df){case cw.playing:dg.updatePlayClockTime(dj,db.lastEventClockTime,dc);++dg.pauseCount;av(dg,dc,c9,"P");if(dg.pauseSeekSession!="-"){dg.pauseSeekSession+=",P("+c9+":"+de+")"}else{dg.pauseSeekSession="P("+c9+":"+de+")"}dg.updatePlayed(c9);break;case cw.rebuffering:++dg.pauseCount;av(dg,dc,c9,"P");if(dg.pauseSeekSession!="-"){dg.pauseSeekSession+=",P("+c9+":"+de+")"}else{dg.pauseSeekSession="P("+c9+":"+de+")"}dg.rebufferTime+=dj;dg.curRebufferTime+=dj;if(dg.rebufferSessionArrayHLine){bG("handlePauseEvent : pushing, rebufferSessionArrayHLine");dg.rebufferSessionArrayHLine.push(dc)}try{T(dg,dc);dg.curRebufferTime=0}catch(dh){bG("Error...Pause"+dh.message)}break}db.state=cw.pause;db.pauseStartStreamTime=c9;db.pauseStartClockTime=dc;db.lastEventClockTime=dc}catch(dh){bG("Exception,  handlePauseEvent : "+dh)}}function bS(db,da){try{if(aD&&aD.akamai){bG("handle bit rate switch");try{db=parseInt(db)}catch(de){bG("Exception,bit rate to int :"+de);return}if(isNaN(db)){bG("handle bitrate swtich, bite rate isNaN")}var dd=aD.akamai;var dc=dd.currentState;var c9=aB(aD);if(cc.currentBitRate!="-"){if(db>cc.currentBitRate){dd.transitionUpSwitchCount++}else{if(db<cc.currentBitRate){dd.transitionDownSwitchCount++}}}if(dc&&dc.state==cw.playing){j(aD,da)}cc.currentBitRate=db;cc.currentStartPos=c9}}catch(de){bG("Exception, handle bit rate switch:"+de)}}function at(da,df){if(bT(da)){bG("handle Play Event : video tag is of type AD, return");return}try{var dd=b0(df);var dj=A(da);if(da.akamai&&da.akamai.postRollTimer){bG("handle play event: send the C line without changing set data");bU(da.akamai.postRollTimer);delete da.akamai.postRollTimer;ao(da,dd)}if(!da.objectBased&&!dj){bG("handle play event, video is null");return}if(P(da,"play",dj,dd)){bG("handle play Event: play is thrown after error, return, curTime = "+dd);return}b2(da,"play",dj,dd);var dh=da.akamai;var c9=parseInt(aB(da));var db=dh.currentState;var dk=dd-db.lastEventClockTime;var de=dd-dh.startTimer;var dg=db.state;bG("entered function handle Play Event, current state = "+cH(db.state));switch(dg){case cw.ended:b7(dj,dh);dh.streamUrl=dj;dh.startTimer=dd;dh.streamLength=parseInt(F(da));if(dj!=null&&dj.indexOf("?")!=-1){dj=dj.substring(0,dj.indexOf("?"))}if(dj!=null&&dj!=""&&(/.m3u8$/.exec(dj))){dh.format="L";dh.playerFormat=dh.playerType+":"+dh.format;dh.deliveryType="L";try{var dc=new XMLHttpRequest();dc.akamai=dh;dc.open("GET",dj,true);dc.onreadystatechange=bw;if(dc.overrideMimeType){dc.overrideMimeType("text/plain")}dc.send(null)}catch(di){bG("handleplayEvent, Exception,  parsing play list, "+di)}}aI=-1;cU(da,false,dd);dh.currentState.state=cw.init;bG(dd+": handlePlayBackEvent : Setting state to init");dh.currentState.timeUpdateClockTime=dd;dh.currentState.timeUpdateStreamTime=0;dh.currentState.lastEventClockTime=dd;dh.isPlaylist=true;break;case cw.pause:dh.pauseDuration+=dk;if(dh.pauseIntervalsAsString!="-"){dh.pauseIntervalsAsString+=","+db.pauseStartStreamTime+":"+(dd-db.pauseStartClockTime)}else{dh.pauseIntervalsAsString=db.pauseStartStreamTime+":"+(dd-db.pauseStartClockTime)}if(dh.pauseSeekSession!="-"){dh.pauseSeekSession+=",R("+db.pauseStartStreamTime+":"+de+")"}else{dh.pauseSeekSession="R("+db.pauseStartStreamTime+":"+de+")"}dh.updatePlayed(db.pauseStartStreamTime,c9);dh.currentState.lastEventClockTime=dd;++dh.resumeBufferCount;db.state=cw.resumeBuffering;break;case cw.init:if(!dh.iLineSentTime){dh.iLineSentTime=dd}if(dh.loadStartILine&&!dh.canPlayEventAutoPlay&&!dh.canPlayUpdated){dh.iLineSentTime=dd;dh.canPlayUpdated=true}break}}catch(di){bG("Exception,  handle Play Event:"+di)}}function j(db,c9){if(bT(db)){bG("handle Playing Event : video tag is of type AD, return");return}try{var dd=b0(c9);var di=A(aD);if(!db.objectBased&&!di){bG("handle playing event, video is null");return}b2(db,"playing",di,dd);var da=parseInt(aB(db));var dg=db.akamai;var dc=dg.currentState;var dj=dd-dc.lastEventClockTime;var de=dd-dg.startTimer;var df=dc.state;bG("entered function handle Playing Event, current State = "+cH(dc.state));switch(df){case cw.rebuffering:dg.rebufferTime+=dj;dg.curRebufferTime+=dj;if(dg.rebufferSessionArrayHLine){dg.rebufferSessionArrayHLine.push(dd)}try{T(dg,dd);dg.curRebufferTime=0}catch(dh){bG("Error...Play"+dh.message)}break;case cw.pause:case cw.resumeBuffering:dg.resumeBufferTime+=dj;if(dj==0&&dg.resumeBufferCount>0){--dg.resumeBufferCount}break;case cw.init:u(db,dj,dd,da);cc.currentStartPos=da;break;case cw.ended:bG("handle Playing Event : dispatch play and playing event");at(db,dd);j(db,dd);break;case cw.playing:dg.updatePlayClockTime(dj,dc.lastEventClockTime,dd);break;case cw.seek:if((dd-dc.timeUpdateClockTime)>0){av(dg,dd,da,"S");dg.updatePlayed(dc.seekStartStreamPos,da)}break}dc.state=cw.playing;dc.lastEventClockTime=dd}catch(dh){bG("Exception,  handle Playing Event:"+dh)}}function G(db,da){if(bT(db)){bG("handleWaitingEvent : video tag is of type AD, return");return}try{var dg=db.akamai;if(dg.currentState.state==cw.rebuffering){bG("already inside handleWaiting Event");return}var dd=b0(da);var c9=parseInt(aB(db));var dc=dg.currentState;var di=dd-dc.lastEventClockTime;var de=dd-dg.startTimer;var df=dc.state;bG("entered function handle Waiting Event, current state = "+cH(dc.state));switch(df){case cw.playing:dg.updatePlayClockTime(di,dc.lastEventClockTime,dd);++dg.rebufferCount;if(dg.rebufferCount==1&&dg.playerState!="B"){dg.firstRebufferStartEpoch=Math.round(dd)}if(dg.rebufferSessionArrayHLine){bG("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+dd);dg.rebufferSessionArrayHLine.push(dd)}dg.updatePlayed(c9);dc.state=cw.rebuffering;break;case cw.pause:++dg.resumeBufferCount;dc.state=cw.resumeBuffering;break;case cw.init:break}dc.lastEventClockTime=dd;bG("handle waiting event, if seek starts, stream pos = "+c9);dc.seekStartStreamPos=c9}catch(dh){bG("Exception,  handleWaitingEvent:"+dh)}}function s(e){if(bT(e)){bG("handleAbortEvent : video tag is of type AD, return");return}R(e)}function R(da,dk){if(bT(da)){bG("handle Error Event : video tag is of type AD, return");return}try{var dc=b0(dk);var dj=A(da);var di=be(da);if(!da.objectBased&&!dj){bG("handle error event, video is null");return}if(P(da,"error",dj,dc)){bG("handle Error Event: consecutive error events thrown, return, curTime = "+dc);return}if(da&&da.akamai&&!da.akamai.isILineSent){bG("handle Error Event: calling handle Play Event");at(da,dc)}b2(da,"error",dj,dc);var c9=parseInt(aB(da));var df=da.akamai;var db=df.currentState;var dl=dc-db.lastEventClockTime;var dd=dc-df.startTimer;var de=db.state;bG("entered function handle Error Event, current state = "+cH(db.state));if(db.state==cw.playing){df.updatePlayClockTime(dl,db.lastEventClockTime,dc)}if(df.isELineSent||df.isCLineSent){return}g(da,di,dc);db.state=cw.ended;var dh=parseInt(C("HTML_LastCLineTime"));a7(da);db.lastEventClockTime=dc}catch(dg){bG("Exception,  handleErrorEvent:"+dg)}}function bP(dc,da){if(bT(dc)){bG("handle Ended Event WithDelay : video tag is of type AD, return");return}try{var df=dc.akamai;var db=df.currentState;bG("entered function handle Ended Event WithDelay, current state"+cH(db.state));var de=b0(da);var dd=af(dc);var c9=de-db.lastEventClockTime;if(df.pollingTimer){bU(df.pollingTimer)}if(b4&&b4.retryTimer){bU(b4.retryTimer)}if(df.hLineTimer){bU(df.hLineTimer)}if(df.fastTCPServerIpTimer){bU(df.fastTCPServerIpTimer)}if(df.firstPLineTimer){bU(df.firstPLineTimer)}if(b4&&b4.retryTimer){bU(b4.retryTimer)}if(df.postRollTimer){bG("handle Ended Event WithDelay: postRollTimer already started return");return}cB(df,"complete");a0(df);bJ(df);df.postRollTimer=bR(ao,1000,[dc]);ck(df);df.customDataPopulated=true;cm(df,de);a6(dc,c9,de,true);df.playEndMetricsUpdated=true}catch(dg){bG("Exception,  handle Ended Event WithDelay"+dg);ao(dc,de)}}function ao(da,df){try{var dh=da.akamai;if(dh.postRollTimer){bU(dh.postRollTimer);delete dh.postRollTimer}if(dh.isELineSent||dh.isCLineSent){bG("handle Ended Event : already sent C line, return");return}var dd=b0(df);var c9=parseInt(aB(da));var db=dh.currentState;var dk=dd-db.lastEventClockTime;var de=dd-dh.startTimer;var dg=db.state;bG("entered function handle Ended Event, current state"+cH(db.state));if(!dh.playEndMetricsUpdated){a6(da,dk,dd,true);dh.playEndMetricsUpdated=true}db.state=cw.ended;var dc=af(da);if(dh.streamTitleSwitchReason!=null&&dh.streamTitleSwitchReason!=""){dc=dh.streamTitleSwitchReason}bE(da,dc,false,dd);var dj=parseInt(C("HTML_LastCLineTime"));a7(da);db.lastEventClockTime=dd}catch(di){bG("Exception,  handle Ended Event :"+di)}}this.getViewerId=function(){try{var c9=aD.akamai;if(c9&&c9.viewerId){return c9.viewerId}else{return null}}catch(da){return null}};this.setData=function(e,c9){bd(e,c9)};this.handleStreamSwitch=function(){cA()};this.handleTitleSwitch=function(e){cI(e)};this.handleFeedbackEvent=function(){aC()};this.handleApplicationExit=function(){aV()};this.enableServerIpLookUp=function(){aZ=true};this.disableServerIpLookUp=function(){aZ=false};this.enableLocation=function(e){bo(e)};function a9(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e&&e.type){aD.akamai.connectivity=e.type}}function bo(c9){if(c9){if(navigator.geolocation&&ai==null){ai=navigator.geolocation.watchPosition(bn,bX);var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e&&e.type){aD.akamai.connectivity=e.type;e.addEventListener("typechange",a9)}}}else{if(navigator.geolocation&&ai!=null){navigator.geolocation.clearWatch(ai);ai=null;e.removeEventListener("typechange",a9)}}}function bn(e){if(e&&e.coords){aD.akamai.latitude=e.coords.latitude;aD.akamai.longitude=e.coords.longitude}}function bX(c9){var e="";switch(c9.code){case c9.PERMISSION_DENIED:e="User denied the request for Geolocation.";break;case c9.POSITION_UNAVAILABLE:e="Location information is unavailable.";break;case c9.TIMEOUT:e="The request to get user location timed out.";break;case c9.UNKNOWN_ERROR:e="An unknown error occurred.";break}bG("Location Error : ",e)}function bd(c9,da){try{if(aD&&aD.akamai&&aD.akamai.isSLineSent){bG("setData() API called after 'Start Of Play' for dimension -> "+c9+"|All custom dimensions should be set before the play is initiated.","WARN")}else{bG("Set Data("+c9+":"+da+")")}if(c9=="customDataObject"){b3(da)}else{if(c9=="customDataFunction"){bq=da}else{try{if(da!=null){da=da.trim()}}catch(db){}if(c9=="viewerId"||c9=="viewerDiagnosticsId"){if(da==null||da==""){da="-"}}try{if(cy){if(c9.substring(0,4)=="_cd_"){cV(c9)}}}catch(db){}try{if(c9.indexOf("std:")!=-1){W[c9.substring(4)]=da}else{bb[c9]=da}}catch(db){bb[c9]=da}if((c9.indexOf("socialShare:")!=-1)||(c9.indexOf("feedback:")!=-1)){aC()}}}}catch(db){bG("Exception, Set Data :"+db)}}function b3(c9){try{if(typeof(c9)=="object"){for(var da in c9){bd(da,c9[da])}}}catch(db){bG("Exception set custom data object"+db)}}function cA(e){var c9=aD.akamai;c9.streamTitleSwitchReason="Stream.Switched";ao(aD,e)}function cI(db,dc){aD.akamai.streamTitleSwitchReason="Title.Switched";var da=aD.akamai.isFirstTitle;ao(aD,dc);try{if(db!=null&&db!=""){for(var c9 in db){bd(c9,db[c9])}}}catch(dd){bG("Exception, handle title switch:"+dd)}aD.akamai.isFirstTitle=da;at(aD,dc);j(aD,dc);try{aD.akamai.currentState.timeUpdateStreamTime=parseInt(aB(aD))}catch(dd){bG("Exception,  handleTitleSwitch"+dd)}}function aC(){try{var df="feedback:";var c9=df.length;var de=false;var dc=b0();for(var db in bb){if(db.indexOf(df)!=-1){var da=db.substring(c9);bb[da]=bb[db];delete bb[db];de=true}}v();bG("handleFeedbackEvent");if(br&&br.shouldSendFLine&&br.akamai&&(br.akamai.isCLineSent||br.akamai.postRollTimer)){if(de){br.akamai.customDataChanged=true}if(br.fLineCount<br.limit){t(br,"feedback",false,dc)}++br.fLineCount;br.akamai.customDataChanged=false;br.akamai.socialSharing=null}}catch(dd){bG("Exception, handle feed back event :"+dd)}}function aV(){try{if(!aD.objectBased){bG("application exit, unsubscribe video events");cF(aD)}}catch(c9){}a4()}function ak(da){if(bT(da)){return}try{if(al){bG("handle time update event, return as inside background state for idevice");return}var dc=b0(null,true);var c9=parseInt(aB(da));var df=da.akamai;if(!df){return}if(df.postRollTimer){return}var db=df.currentState;var di=dc-db.lastEventClockTime;var de=dc-df.startTimer;var dg=db.state;var dd=c9-db.timeUpdateStreamTime;if(db.timeUpdateStreamTime!=0){if(Math.abs(dd)>=n.seekThreshold&&df.isSLineSent){bG("stream diff in time update is "+dd);Z(da,dc,c9)}else{if((dd>0)&&(dd<=750)){if(da.objectBased){if(db.state==cw.seek){j(da)}}else{if(!df.isSLineSent||db.state==cw.seek||db.state==cw.rebuffering){bG("handle time update event,  dispatching playing event,  current Video state is : "+cH(db.state));j(da)}}}}}db.timeUpdateClockTime=dc;db.timeUpdateStreamTime=c9}catch(dh){bG("Exception,  handleTimeupddate :"+dh)}}this.handleSessionInit=function(c9,da){try{if(c9){if(typeof cu!="object"){cu={}}if(c9.streamHeadPosition){cu.streamHeadPosition=c9.streamHeadPosition}if(c9.streamLength){cu.streamLength=c9.streamLength}if(c9.streamURL){cu.streamURL=c9.streamURL}if(c9.bytesLoaded){cu.bytesLoaded=c9.bytesLoaded}if(c9.customDataFunction){cu.customDataFunction=c9.customDataFunction}if(cu.customDataFunction){bq=cu.customDataFunction}if(c9.firstBitRate){cu.firstBitRate=c9.firstBitRate}if(cu.firstBitRate){bS(cu.firstBitRate,da)}}at(aD,da)}catch(db){}};this.handleBitRateSwitch=function(c9,e){bS(c9,e)};this.handlePlaying=function(e){at(aD,e);j(aD,e)};this.handlePlayEnd=function(c9,e){if(aD.objectBased){aD.endReason=c9}bP(aD,e)};this.handleMediaChangedEvent=function(){ao(aD)};this.handlePause=function(e){ae(aD,e)};this.handleResume=function(e){at(aD,e);j(aD,e)};this.handleBufferStart=function(e){G(aD,e)};this.handleBufferEnd=function(e){at(aD,e);j(aD,e)};this.handleError=function(c9,db){try{if(aD.objectBased){aD.errorReason=c9}R(aD,db)}catch(da){}};this.handleTimeupdateEvent=function(){ak(aD)};this.updateAdObject=function(e){bt(e)};this.handleAdLoaded=function(da,c9){try{bs(da,c9)}catch(db){}};this.handleAdStarted=function(c9,e){aT(c9,e)};this.handleAdCompleted=function(e){K(e)};this.handleAdFirstQuartile=function(){cX()};this.handleAdMidPoint=function(){b()};this.handleAdThirdQuartile=function(){cl()};this.handleAdStopped=function(e){m(e)};this.handleAdError=function(e){aM(e)};this.handleSetupAISEvent=function(e,c9,da){bl(e,c9,da)};this.getStream=function(){var e=aD.akamai;return e.stream};function bl(c9,db,dd){try{var da=b4.aisRequestLimit;var dc=b4.aisRequestInterval;b4=new an();b4.aisRequestInterval=dc;b4.aisRequestLimit=da;if(!c9){bG("return from ais, platform is null");return}b4.platform=c9;b4.version=db?db:"1.0";if(dd){b4.aisCustomDataObj=dd}b4.requestUrl="http://idp.securetve.com/rest/";b4.initUrl=b4.requestUrl+b4.version+"/"+b4.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest";b4.identityUrl=b4.requestUrl+b4.version+"/"+b4.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest";b4.initUrlId="AkamaiAISInitUrl";b4.identityUrlId="AkamaiAISIdentityUrl";r(b4.initUrl,b4.initUrlId)}catch(de){b4.requestFailed=true}}this.receiveAISInitRequest=function(db){try{b4.initObj=db;au(b4.initUrlId);if(b4.initObj==""||b4.initObj==null){b4.requestFailed=true;return}if(b4.requestFailed){return}if(b4.initObj.authenticated){b4.akamai={};b4.akamai.ais_queryToken=b4.initObj.querytoken;if(b4.initObj.idps){var dc=b4.initObj.idps;for(var c9 in dc){b4.akamai.ais_idpId=c9;b4.akamai.ais_idpName=dc[c9].name;b4.akamai.ais_idpDisplayName=dc[c9].display_name;b4.akamai.ais_idpUrl=dc[c9].url}}r(b4.identityUrl,b4.identityUrlId)}else{if(!b4.requestFailed){bG("receiveAISInitRequest, retrying the request");++b4.aisRetries;if(b4.aisRetries<b4.aisRequestLimit){b4.retryTimer=bR(r,b4.aisRequestInterval,[b4.initUrl,b4.initUrlId])}}}}catch(da){b4.requestFailed=true}};this.receiveAISIdentityRequest=function(da){try{b4.identityObj=da;au(b4.identityUrlId);if(da==null||da==""){return}if(!b4.akamai){b4.akamai={}}if(da.indentity&&da.identity.aisuid){b4.akamai.ais_aisuid=da.identity.aisuid}cJ()}catch(c9){b4.requestFailed=true}};function cJ(){var da={};var dc;var db;try{if(b4&&b4.aisCustomDataObj){if(!b4.akamai){b4.akamai={}}for(var c9 in b4.aisCustomDataObj){dc=b4.aisCustomDataObj[c9].split("/");if(dc[0]=="INIT"&&b4.initObj){da=b4.initObj}else{if(dc[0]=="IDENTITY"&&b4.identityObj){da=b4.identityObj}}if(da){for(db=1;db<dc.length;db++){if(dc[db]&&da[dc[db]]){da=da[dc[db]]}}if(typeof(da)!="object"){b4.akamai[c9]=da}}}}}catch(dd){bG("Exception,  populateAISCustomData"+dd)}}function r(da,dc){try{var c9=document.createElement("script");c9.setAttribute("src",da);c9.id=dc;document.getElementsByTagName("head")[0].appendChild(c9)}catch(db){bG("Exception,  loading JavaScript File "+da)}}function au(db){try{var c9=document.getElementById(db);c9.parentNode.removeChild(c9)}catch(da){bG("Exception,  removing script with id "+db)}}function cG(c9){var da,e;da=c9.akamai;da.pollingTimer=bR(cG,J,[c9]);if(c9){if(c9.isBrightcoveVideo){akamaiBCVideoModule.getVideoPosition(false,aq)}else{aq(0,c9)}}}function aq(e,db){var dd,c9;var dc=b0(null,true);if(aD!=null&&aD.isBrightcoveVideo){aD.currentTime=parseInt(e);c9=parseInt(e*1000);db=aD}else{c9=parseInt(aB(db))}if(c9=="undefined"||isNaN(c9)||c9==""){return}dd=db.akamai;var da=dd.currentState;if(da.state==cw.ended){return}if(db.objectBased){ak(db)}else{if(da.state==cw.pause||da.state==cw.seek){return}if((c9!=0)&&(c9===da.pollingTimerStreamTime)&&(da.state!=cw.rebuffering)){bG("check stream head position, call handle waiting event");G(db)}else{da.pollingTimerStreamTime=c9}}}function aB(da){var c9=0;try{if(da.objectBased){if(cu&&cu.streamHeadPosition){c9=cu.streamHeadPosition();da.currentTime=c9}}else{if(cg.currentTime){c9=cg.currentTime;da.currentTime=c9}}}catch(db){}if(c9==0&&aI!=-1){c9=aI}if(c9!=0){aI=c9}return(c9*1000)}function F(c9){var db=0;try{if(c9){if(c9.objectBased){if(cu&&cu.streamLength){db=cu.streamLength();c9.duration=db}}else{db=cg.duration;c9.duration=db}}}catch(da){}return(db*1000)}function A(da){var c9="";try{if(da){if(da.objectBased){if(cu&&cu.streamURL){c9=cu.streamURL();da.currentSrc=c9}}else{c9=cg.currentSrc;da.currentSrc=c9}}}catch(db){}return c9}function cC(){return aB(aD)/1000}function c6(){return F(aD)/1000}function bh(){return A(aD)}function ca(db){var c9=0,da=0;try{if(db){if(db.objectBased){if(cu&&cu.bytesLoaded){c9=parseInt(cu.bytesLoaded());da=c9-db.akamai.lastBytesLoaded}}}}catch(dc){}db.akamai.lastBytesLoaded=c9;if(da>0){return da}}function aE(da){try{var c9={};if(bq!=null){c9=bq();b3(c9)}}catch(db){}}function bs(da,c9){try{bG("handle Ad loaded");if(B.isAdLoaded){bG("handleAdLoaded API is called multiple times.|We have identified that 2 successive handleAdLoaded APIs are called.|Kindly ensure that sequence of Ad calls -- handleAdLoaded->handleAdStarted->handleAdComplete is maintained.","WARN")}var dd=aD.akamai;if(!dd.isILineSent){var db=new Date().getTime();if(c9!=null&&db-c9>0){}}var dc=b0(c9);B.clearAdAnalytics();B.isAdLoaded=true;B.adLoadTime=dc;B.adCount=1;B.adAbandoned=true;if(dd.postRollTimer){bA(aD);bU(dd.postRollTimer);dd.postRollAd=true;dd.customDataPopulated=false;B.type=2}else{if(dd.isILineSent){if(dd.isSLineSent){ae(aD,dc);B.type=1}else{if(!dd.isSLineSent){if(!dd.adLoadTime){dd.adLoadTime=dc}}}}}bt(da);if(!dd.isILineSent){ap(false,dc)}}catch(de){bG("Exception,handle ad loaded:"+de)}}function aT(da,c9){try{bG("handle Ad Started");var db=b0(c9);B.isAdStarted=true;if(!B.isAdLoaded){bG("handleAdLoaded API is missing.|We have identified that handleAdStarted API is called without handleAdLoaded.|Kindly ensure that handleAdLoaded API is called for every Ad and relevant adObject is passed as an argument.","WARN");bs(da,db)}B.playBucket="0";B.adStartTime=db;B.adStartupTime=db-B.adLoadTime;B.startPos=aB(aD);bt(da)}catch(dc){bG("Exception,handle ad started:"+dc)}}function K(c9){try{bG("handleAdEnded");if(B.playBucket=="0"){bG("Ad Progress related APIs not called.|We have identified that handleAdFirstQuartile,handleAdMidPoint & handleAdThirdQuartile APIs have not been called.|It will be good if these APIs are called in order to capture more accurate Ad information","WARN")}B.playBucket="4";b1("0",c9)}catch(da){bG("Exception,handle ad completed:"+da)}}function cX(){if(!B.isAdStarted){bG("handleAdStarted API is missing.|We have identified that handleAdFirstQuartile API is called without handleAdStarted.|Kindly ensure that handleAdStarted API is called for every Ad that starts successfully.","ERROR")}B.playBucket="1"}function b(){B.playBucket="2"}function cl(){B.playBucket="3"}function m(e){b1("1",e)}function aM(e){b1("3",e)}function bt(da){try{var db=B.setDataArr;bG("populate ad metric");for(var c9=0;c9<db.length;c9++){if(db[c9] in da){B[db[c9]]=da[db[c9]]}}}catch(dc){}}function b1(dc,c9){try{var de=b0(c9);var dd=aD.akamai;B.endStatus=dc;if(dc!="0"){B.adAbandonCount=1}if(B.isAdLoaded&&B.isAdStarted){B.adPlayClockTime=de-B.adStartTime}B.adSession=aw();var da=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"];for(var db=0;db<da.length;db++){dd[da[db]]+=B[da[db]]}if(dd.adSession){dd.adSession+=","+B.adSession}else{dd.adSession=B.adSession}B.isAdStarted=false;B.isAdLoaded=false;if(dc!="2"){B.adAbandoned=false;if(dd){if(dd.postRollAd){dd.postRollAd=null;ao(aD,de)}else{if(dd.isSLineSent){at(aD,de);j(aD,de)}else{if(!dd.isSLineSent){dd.adEndTime=de}}}}}}catch(df){bG("Exception,populate ad end:"+df)}}function aw(){var c9="";var da=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var db=0;db<da.length;db++){if((B[da[db]]==0)||(B[da[db]]!=null&&B[da[db]]!="")){c9+=B[da[db]]+":"}else{c9+=":"}}c9=c9.substring(0,c9.length-1)}catch(dc){}return c9}function aY(c9){try{if(bT(c9)){return}var da=c9.akamai;if(da.firstTimeProgress){}}catch(db){}}function aL(c9){try{if(bT(c9)){return}var da=c9.akamai;if(cg.autoplay){at(c9);da.loadStartILine=true}}catch(db){}}function cn(c9){try{if(bT(c9)){return}var da=c9.akamai;if(cg.autoplay){da.canPlayEventAutoPlay=true}else{da.canPlayEventAutoPlay=false}}catch(db){}}function b8(c9){try{if(bT(c9)){return}var da=c9.akamai;if(da.firstTimeProgress){da.firstTimeProgress=false}if(da.logType=="R"){}}catch(db){}}function c8(c9){try{if(bT(c9)){return}var da=c9.akamai;da.streamLength=parseInt(F(c9))}catch(db){}}this.subscribeVideoObject=function(c9){try{if(c9){Y(c9)}}catch(da){}};function Y(da){bG("subscribeToEvents : video = "+da);var c9=["abort","error","play","pause","playing","waiting","seeking","seeked","ended","timeupdate"];var dc=["progress","load","durationchange"];cg=da;try{da.addEventListener("play",bM.play=function(){at(aD)},false);da.addEventListener("pause",bM.pause=function(){ae(aD)},false);da.addEventListener("error",bM.error=function(){R(aD)},false);da.addEventListener("ended",bM.ended=function(){bP(aD)},false);da.addEventListener("playing",bM.playing=function(){j(aD)},false);da.addEventListener("waiting",bM.waiting=function(){G(aD)},false);da.addEventListener("timeupdate",bM.timeupdate=function(){ak(aD)},false);da.addEventListener("load",bM.load=function(){aY(aD)},false);da.addEventListener("progress",bM.progress=function(){b8(aD)},false);da.addEventListener("durationchange",bM.durationchange=function(){c8(aD)},false);da.addEventListener("canplay",bM.canplay=function(){cn(aD)},false);da.addEventListener("loadstart",bM.loadstart=function(){aL(aD)},false);bG("subscribed to events completed")}catch(db){bG("Exception,  subscribeToEvents,unable to add listeners to video tag :"+db)}}function cF(c9){try{c9.removeEventListener("play",bM.play,false);c9.removeEventListener("pause",bM.pause,false);c9.removeEventListener("error",bM.error,false);c9.removeEventListener("ended",bM.ended,false);c9.removeEventListener("playing",bM.playing,false);c9.removeEventListener("waiting",bM.waiting,false);c9.removeEventListener("timeupdate",bM.timeupdate,false);c9.removeEventListener("load",bM.load,false);c9.removeEventListener("progress",bM.progress,false);c9.removeEventListener("durationchange",bM.durationchange,false);c9.removeEventListener("canplay",bM.canplay,false);c9.removeEventListener("loadstart",bM.loadstart,false)}catch(da){bG("Exception, unSubscribeFrom Events:"+da)}}function bv(db){try{if(typeof(akamaiBCVideoObject)!="undefined"){cg=akamaiBCVideoObject;aD.isBrightcoveVideo=true;initBrightcove()}else{if(aD.objectBased||aD.videoPassed){}else{if(document){var da=document.getElementsByTagName("video");bG("add MediaEvent Listeners : videos.length "+da.length);if(da&&da.length==0){da=document.getElementsByTagName("audio")}for(var c9=0;c9<da.length;++c9){Y(da[c9])}document.addEventListener("DOMNodeInserted",aH,false);document.addEventListener("DOMNodeRemoved",aH,false);document.addEventListener("DOMAttrModified",aH,false)}}}if(db){if(db.type=="DOMContentLoaded"){document.removeEventListener("load",bv,true)}else{if(db.type=="load"&&da&&da.length>0){document.removeEventListener("load",bv,true)}}}}catch(dc){bG("Exception,  add MediaEvent Listeners :"+dc)}}function aH(e){var c9=e.target;if(c9.nodeType==c9.COMMENT_NODE||c9.tagName==null||(c9.tagName.toLowerCase()!="video"&&c9.tagName.toLowerCase()!="audio")){return}switch(e.type){case"DOMNodeRemoved":if(c9.dataset&&c9.dataset.isad&&c9.dataset.isad=="true"){}else{cP(aD,0)}break;case"DOMNodeInserted":Y(c9);break}}function cP(da,dj){bG("handle Video Unload");var dd=b0();var de=da.akamai;var dc=parseInt(C("HTML_VisitCountCookie"));bg.browserClose=true;try{if(de&&de.currentState.state>=cw.init&&dj==0){if(de.isELineSent||de.isCLineSent){return}if(B&&B.adAbandoned){var db="Ad.Abandon";if(de.postRollTimer){bU(de.postRollTimer);delete de.postRollTimer}bE(da,db,true,dd)}else{if(!de.firstTimePlay){var db="Browser.Close";if(de.postRollTimer){bU(de.postRollTimer);delete de.postRollTimer}bE(da,db,true,dd)}else{var di="Browser.Refresh.NoStart";if((dd-de.startTimer)>n.initBrowserCloseTime){di="Browser.Refresh.NoStart.Late"}g(da,di,true,dd)}}}}catch(df){}try{var dh=parseInt(C("HTML_LastCLineTime"));var dg=(dh+n.visitTimeout)-dd;var c9=parseInt(C("HTML_isPlayingCount"));bG("handle Video Unload: playing cookie =  "+c9+", visit cookie :"+dc);if(dc>=1&&dj==1){if(dg>0){bU(de.clearVisitTimeoutId);da.akamai.clearVisitTimeoutId=bR(cP,dg,[da,1]);return}else{if(dg<=0&&dc>1&&c9>0){bU(de.clearVisitTimeoutId);da.akamai.clearVisitTimeoutId=bR(cP,n.visitTimeout,[da,1]);return}}}bG("handle Video Unload: decrementing HTML_VisitCountCookie");dc=dc-1;bj("HTML_VisitCountCookie",dc);var dc=parseInt(C("HTML_VisitCountCookie"));if(dc===0||isNaN(dc)){if(de.sendVLine){am(da,dd)}}}catch(df){}}function a4(){try{if(B.isAdLoaded){b1("2")}}catch(c9){}cP(aD,0)}function c1(c9){bG("handlePagehide");al=true;a4()}function cT(c9){bG("handlePageshow:");try{if(aD&&aD.tagName){bG("handlePageShow: media tag is :"+aD.tagName);if(aD.akamai&&al){bG("handlePageshow: send play and playing on timeupdate");O=true}}}catch(c9){bG("Exception,  handlePagehsow : "+c9)}al=false}function C(da){var c9=da+"=";var dc="";try{if(document.cookie.length>0){offset=document.cookie.indexOf(c9);if(offset!=-1){offset+=c9.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}dc=document.cookie.substring(offset,end)}}}catch(db){}return dc}function V(c9){try{var dd=location.pathname.split("/");var dc=" path=";document.cookie=c9+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;";for(var da=0;da<dd.length;da++){dc+=((dc.substr(-1)!="/")?"/":"")+dd[da];document.cookie=c9+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;"+dc+";"}}catch(db){}}function bj(da,db,de){try{var c9=da+"="+db+";Path=/;";if(de){if(parseInt(de)>0){var dd=new Date();dd.setDate(dd.getDate()+parseInt(de));if(dd!=null){c9+="expires="+dd.toUTCString()+";"}}}if(document){document.cookie=c9}}catch(dc){}}function c0(df,dc){try{if(typeof df!=="undefined"&&df!==null&&typeof dc!=="undefined"&&dc!==null){var c9=df[h(dc.name)];var db=by.SHA1(c9).toString();var de=y(db);var da=0;var dd=b0();if(de){da=dd-parseFloat(de);da=(da/1000)/60;da=(da>0)?da.toFixed(2):0}bm(db,dd,dc.expiryDuration);df[dc.name]=da.toString()}}catch(dg){bG("Exception,  calculateUniqueDimension :"+dg)}}function h(e){dimension="";if(e==="viewerInterval"){dimension="viewerId"}else{if(e==="viewerTitleInterval"){dimension="title"}}return dimension}function y(da){try{var db=window.localStorage.getItem(da);if(typeof db!=="undefined"&&db!==null){var c9=JSON.parse(db);var dc=c9.value;return dc}}catch(dd){}}function a8(){try{bG("deleteExpiredDataFromLocalStorage");var da=b0();var dd=null;var c9=window.localStorage.length;for(var dc=c9-1;dc>=0;dc--){var db=window.localStorage.getItem(window.localStorage.key(dc));if(typeof db!=="undefined"&&db!==null&&db.indexOf("expiryDate")!==-1){var de=JSON.parse(db);if(typeof de!=="undefined"&&de!==null&&typeof de.expiryDate!=="undefined"&&de.expiryDate!==null){dd=Date.parse(de.expiryDate);if(dd<=da){window.localStorage.removeItem(window.localStorage.key(dc))}}}}}catch(df){}}function bm(db,dc,de){try{var da={value:dc};if(typeof de!=="undefined"&&de!==null){var c9=new Date();if(parseInt(de)>0){c9.setDate(c9.getDate()+parseInt(de))}else{c9.setDate(c9.getDate()+parseInt(90))}da.expiryDate=c9.toDateString()}window.localStorage.setItem(db,JSON.stringify(da))}catch(dd){}}function cR(){try{if(aG=="iPad"||aG=="iPhone"){return true}}catch(c9){return false}}function Q(){try{if(aD.objectBased||aD.videoPassed){bv()}else{bG("adding MediaEventListeners: DOMContentLoaded");document.addEventListener("DOMContentLoaded",bv,false);bG("adding MediaEventListeners: Load");document.addEventListener("load",bv,true)}}catch(c9){bG("Exception,  Addding DOMContentLoaded and Load event listeners :"+c9)}if(window){if(cR()){window.addEventListener("pagehide",c1,false);window.addEventListener("pageshow",cT,false)}else{if(typeof(akamaiBCVideoObject)!="undefined"&&window.addEventListener){window.addEventListener("beforeunload",a4,false)}else{if(window.addEventListener){try{if(bD()){window.parent.addEventListener("beforeunload",a4,false)}else{window.addEventListener("beforeunload",a4,false)}}catch(c9){bG("Exception, add window document listeners : "+c9);window.addEventListener("beforeunload",a4,false)}}else{if(window.attachEvent){try{if(bD()){window.parent.attachEvent("onbeforeunload",a4)}else{window.attachEvent("onbeforeunload",a4)}}catch(c9){window.attachEvent("onbeforeunload",a4)}}}}}}}Q()}if(typeof(akamaiBCVideoObject)!="undefined"){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}else{if(typeof(AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH)!="undefined"){if((AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")==-1&&AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo")==-1)){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}}}function setAkamaiMediaAnalyticsData(b,c,a){try{if(akaMediaAnalytics){akaMediaAnalytics.setData(b,c)}}catch(d){}}function playbackCompleted(){try{if(akaMediaAnalytics){akaMediaAnalytics.handlePlayEnd()}}catch(a){console.log(a)}}function akamaiGetViewerId(){try{var b=null;if(akaMediaAnalytics){b=akaMediaAnalytics.getViewerId()}}catch(a){}return b}function akamaiSetViewerId(a){if(a==null||a==""){a="-"}setAkamaiMediaAnalyticsData("viewerId",a);setAkamaiMediaAnalyticsData("clientId",a)}function akamaiSetViewerDiagnosticsId(a){if(a==null||a==""){a="-"}setAkamaiMediaAnalyticsData("viewerDiagnosticsId",a)}function akamaiUpdateAdObject(a){if(akaMediaAnalytics){akaMediaAnalytics.updateAdObject(a)}}function akamaiHandleAdStarted(a){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStarted(a)}}function akamaiHandleAdCompleted(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdCompleted()}}function akamaiHandleAdLoaded(a){if(akaMediaAnalytics){akaMediaAnalytics.handleAdLoaded(a)}}function akamaiHandleAdFirstQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdFirstQuartile()}}function akamaiHandleAdMidPoint(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdMidPoint()}}function akamaiHandleAdThirdQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdThirdQuartile()}}function akamaiHandleAdError(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdError()}}function akamaiHandleAdStopped(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStopped()}}function akamaiHandleStreamSwitch(){if(akaMediaAnalytics){akaMediaAnalytics.handleStreamSwitch()}}function akamaiHandleTitleSwitch(a){if(akaMediaAnalytics){akaMediaAnalytics.handleTitleSwitch(a)}}function akamaiSetupAIS(a,b,c){if(akaMediaAnalytics){akaMediaAnalytics.handleSetupAISEvent(a,b,c)}}function akamaiHandleBitRateSwitch(a){if(akaMediaAnalytics){akaMediaAnalytics.handleBitRateSwitch(a)}}function akamaiHandleApplicationExit(){if(akaMediaAnalytics){akaMediaAnalytics.handleApplicationExit()}}function akamaiSetVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}}function akamaiSubscribeVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}}function akamaiEnableLocation(a){if(akaMediaAnalytics){akaMediaAnalytics.enableLocation(a)}}function akamaiDisableServerIpLookup(){try{if(akaMediaAnalytics){akaMediaAnalytics.disableServerIpLookUp()}}catch(a){}}function akamaiEnableServerIpLookup(){try{if(akaMediaAnalytics){akaMediaAnalytics.enableServerIpLookUp()}}catch(a){}}function fragmentDownloadStarted(a){var b=akaMediaAnalytics.getStream();if(!b||!a){return}b.streamFragmentDownloadStarted(a)}function fragmentDownloadCompleted(a){var b=akaMediaAnalytics.getStream();if(!b||!a){return}b.streamFragmentDownloadCompleted(a)};